ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"interrupt.cpp"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	__aeabi_f2d
  18              		.global	__aeabi_ddiv
  19              		.global	__aeabi_d2iz
  20              		.global	__aeabi_i2d
  21              		.global	__aeabi_dmul
  22              		.global	__aeabi_dadd
  23              		.global	__aeabi_d2f
  24              		.section	.text.HAL_GPIO_EXTI_Callback,"ax",%progbits
  25              		.align	1
  26              		.global	HAL_GPIO_EXTI_Callback
  27              		.syntax unified
  28              		.thumb
  29              		.thumb_func
  30              		.fpu fpv4-sp-d16
  32              	HAL_GPIO_EXTI_Callback:
  33              	.LFB492:
  34              		.file 1 "Core/Src/devs/interrupt.cpp"
   1:Core/Src/devs/interrupt.cpp **** 
   2:Core/Src/devs/interrupt.cpp **** #include "robo_init.h"
   3:Core/Src/devs/interrupt.cpp **** 
   4:Core/Src/devs/interrupt.cpp **** extern leg leg[2];
   5:Core/Src/devs/interrupt.cpp **** extern steering steering;
   6:Core/Src/devs/interrupt.cpp **** 
   7:Core/Src/devs/interrupt.cpp **** extern bool ROBOT_START_FLAG;
   8:Core/Src/devs/interrupt.cpp **** extern bool STEERING_FLAG;
   9:Core/Src/devs/interrupt.cpp **** extern bool FRONT_PROXIMITY_FLAG;
  10:Core/Src/devs/interrupt.cpp **** extern bool BACK_PROXIMITY_FLAG;
  11:Core/Src/devs/interrupt.cpp **** extern bool GEREGE_FLAG;
  12:Core/Src/devs/interrupt.cpp **** void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
  13:Core/Src/devs/interrupt.cpp **** {
  35              		.loc 1 13 0
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 0
  38              		@ frame_needed = 0, uses_anonymous_args = 0
  39              	.LVL0:
  40 0000 10B5     		push	{r4, lr}
  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 8
  43              		.cfi_offset 4, -8
  44              		.cfi_offset 14, -4
  45              	.LBB33:
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 2


  14:Core/Src/devs/interrupt.cpp ****         switch (GPIO_Pin) {
  46              		.loc 1 14 0
  47 0002 B0F5005F 		cmp	r0, #8192
  48 0006 00F0AC80 		beq	.L3
  49 000a 46D9     		bls	.L22
  50 000c B0F5804F 		cmp	r0, #16384
  51 0010 58D0     		beq	.L6
  52 0012 B0F5004F 		cmp	r0, #32768
  53 0016 45D1     		bne	.L1
  54              	.LVL1:
  55              	.LBB34:
  56              	.LBB35:
  57              	.LBB36:
  58              	.LBB37:
  59              	.LBB38:
  60              		.file 2 "Core/Inc/devs/leg.h"
   1:Core/Inc/devs/leg.h **** #ifndef _LEG_H_
   2:Core/Inc/devs/leg.h **** #define _LEG_H_
   3:Core/Inc/devs/leg.h **** 
   4:Core/Inc/devs/leg.h **** #include "motor.h"
   5:Core/Inc/devs/leg.h **** #include "encoder.h"
   6:Core/Inc/devs/leg.h **** #include "pid.h"
   7:Core/Inc/devs/leg.h **** #include "limit_switch.h"
   8:Core/Inc/devs/leg.h **** #include "defines.h"
   9:Core/Inc/devs/leg.h **** #include "pid_algorithms.h"
  10:Core/Inc/devs/leg.h **** 
  11:Core/Inc/devs/leg.h **** enum Leg_condition{	RAISED, 
  12:Core/Inc/devs/leg.h **** 			FALLEN, 
  13:Core/Inc/devs/leg.h **** 			UNDEFINED};
  14:Core/Inc/devs/leg.h **** 
  15:Core/Inc/devs/leg.h **** class leg
  16:Core/Inc/devs/leg.h **** {
  17:Core/Inc/devs/leg.h **** public:
  18:Core/Inc/devs/leg.h **** 	leg() {}
  19:Core/Inc/devs/leg.h **** 	leg(leg &&) = default;
  20:Core/Inc/devs/leg.h **** 	leg(const leg &) = default;
  21:Core/Inc/devs/leg.h **** 	leg &operator=(leg &&) = default;
  22:Core/Inc/devs/leg.h **** 	leg &operator=(const leg &) = default;
  23:Core/Inc/devs/leg.h **** 	~leg(){}
  24:Core/Inc/devs/leg.h ****         void set_config(motor_config *motor, encoder_config *encoder) { 
  25:Core/Inc/devs/leg.h **** 		motor__.set_config(motor);
  26:Core/Inc/devs/leg.h **** 		encoder__.set_config(encoder);
  27:Core/Inc/devs/leg.h **** 	}
  28:Core/Inc/devs/leg.h **** 	void set_PID_constants(float kp, float ki, float kd, float lower_limit, float upper_limit) {
  29:Core/Inc/devs/leg.h **** 		dpid_.set_P(kp);
  30:Core/Inc/devs/leg.h **** 		dpid_.set_I(ki);
  31:Core/Inc/devs/leg.h **** 		dpid_.set_D(kd);
  32:Core/Inc/devs/leg.h **** 		dpid_.set_Limits(upper_limit, lower_limit);
  33:Core/Inc/devs/leg.h **** 	}
  34:Core/Inc/devs/leg.h **** 
  35:Core/Inc/devs/leg.h **** 	
  36:Core/Inc/devs/leg.h **** 	void set_omega(float omega);
  37:Core/Inc/devs/leg.h **** 	float ramp(float omega);
  38:Core/Inc/devs/leg.h **** 	void set_gravity_compensator_constant(float kgravity){kg_ = kgravity;}
  39:Core/Inc/devs/leg.h **** 	void reset_angle(float angle_in_radians);
  40:Core/Inc/devs/leg.h **** 	void reset_actual_angle(float angle_in_radians){encoder__.reset_actual_angle(angle_in_radians);}
  41:Core/Inc/devs/leg.h **** 	void calculate_omega();
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 3


  42:Core/Inc/devs/leg.h **** 	Leg_condition is_raised();
  43:Core/Inc/devs/leg.h **** 	bool is_raised_without_deadzone();
  44:Core/Inc/devs/leg.h **** 
  45:Core/Inc/devs/leg.h **** 	int get_steps(){return steps;}
  46:Core/Inc/devs/leg.h **** 	float get_omega(void){return encoder__.get_omega();}
  47:Core/Inc/devs/leg.h **** 	float get_angle(void){return encoder__.get_angle();}
  61              		.loc 2 47 0
  62 0018 6D48     		ldr	r0, .L27+24
  63              	.LVL2:
  64 001a FFF7FEFF 		bl	_ZN7encoder9get_angleEv
  65              	.LVL3:
  66              	.LBE38:
  67              	.LBE37:
  15:Core/Src/devs/interrupt.cpp **** 		case GPIO_PIN_0 : {
  16:Core/Src/devs/interrupt.cpp **** 			ROBOT_START_FLAG = true;
  17:Core/Src/devs/interrupt.cpp **** 			// printf("\n\n\t\t\t !!start_pressed!!\n\n");
  18:Core/Src/devs/interrupt.cpp **** 		}break;
  19:Core/Src/devs/interrupt.cpp **** 
  20:Core/Src/devs/interrupt.cpp ****                 case GPIO_PIN_15 : {
  21:Core/Src/devs/interrupt.cpp **** 			float leg0_reset_angle = 90*PI/180;
  22:Core/Src/devs/interrupt.cpp **** 			float tolerence = 40*PI/180;
  23:Core/Src/devs/interrupt.cpp **** 			static int count1 = 0;
  24:Core/Src/devs/interrupt.cpp **** 			if(((leg[0].get_angle()>(leg0_reset_angle-tolerence)) && (leg[0].get_angle()<(leg0_reset_angle+t
  68              		.loc 1 24 0
  69 001e DFED6D7A 		vldr.32	s15, .L27+28
  70 0022 B4EEE70A 		vcmpe.f32	s0, s15
  71 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  72 002a 3CDC     		bgt	.L23
  73              	.L8:
  74              		.loc 1 24 0 is_stmt 0 discriminator 4
  75 002c 6A4B     		ldr	r3, .L27+32
  76 002e 1B68     		ldr	r3, [r3]
  77 0030 022B     		cmp	r3, #2
  78 0032 43DD     		ble	.L11
  79              	.L10:
  80              	.LBB39:
  25:Core/Src/devs/interrupt.cpp ****                         	leg[0].reset_angle(leg0_reset_angle);
  81              		.loc 1 25 0 is_stmt 1 discriminator 5
  82 0034 694C     		ldr	r4, .L27+36
  83 0036 9FED6A0A 		vldr.32	s0, .L27+40
  84 003a 2046     		mov	r0, r4
  85 003c FFF7FEFF 		bl	_ZN3leg11reset_angleEf
  86              	.LVL4:
  87              	.LBB40:
  88              	.LBB41:
  48:Core/Inc/devs/leg.h **** 	float get_actual_angle(void){return encoder__.get_actual_angle();}
  89              		.loc 2 48 0 discriminator 5
  90 0040 3C34     		adds	r4, r4, #60
  91 0042 2046     		mov	r0, r4
  92 0044 FFF7FEFF 		bl	_ZN7encoder16get_actual_angleEv
  93              	.LVL5:
  94              	.LBE41:
  95              	.LBE40:
  26:Core/Src/devs/interrupt.cpp **** 				int temp = round(leg[0].get_actual_angle()/ (360*PI/180));
  96              		.loc 1 26 0 discriminator 5
  97 0048 10EE100A 		vmov	r0, s0
  98 004c FFF7FEFF 		bl	__aeabi_f2d
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 4


  99              	.LVL6:
 100 0050 59A3     		adr	r3, .L27
 101 0052 D3E90023 		ldrd	r2, [r3]
 102 0056 FFF7FEFF 		bl	__aeabi_ddiv
 103              	.LVL7:
 104 005a 41EC100B 		vmov	d0, r0, r1
 105 005e FFF7FEFF 		bl	round
 106              	.LVL8:
 107 0062 51EC100B 		vmov	r0, r1, d0
 108 0066 FFF7FEFF 		bl	__aeabi_d2iz
 109              	.LVL9:
  27:Core/Src/devs/interrupt.cpp **** 				leg[0].reset_actual_angle((int)(temp)*2*PI + leg0_reset_angle);
 110              		.loc 1 27 0 discriminator 5
 111 006a 4000     		lsls	r0, r0, #1
 112              	.LVL10:
 113 006c FFF7FEFF 		bl	__aeabi_i2d
 114              	.LVL11:
 115 0070 53A3     		adr	r3, .L27+8
 116 0072 D3E90023 		ldrd	r2, [r3]
 117 0076 FFF7FEFF 		bl	__aeabi_dmul
 118              	.LVL12:
 119 007a 53A3     		adr	r3, .L27+16
 120 007c D3E90023 		ldrd	r2, [r3]
 121 0080 FFF7FEFF 		bl	__aeabi_dadd
 122              	.LVL13:
 123 0084 FFF7FEFF 		bl	__aeabi_d2f
 124              	.LVL14:
 125              	.LBB42:
 126              	.LBB43:
  40:Core/Inc/devs/leg.h **** 	void calculate_omega();
 127              		.loc 2 40 0 discriminator 5
 128 0088 00EE100A 		vmov	s0, r0
 129 008c 2046     		mov	r0, r4
 130              	.LVL15:
 131 008e FFF7FEFF 		bl	_ZN7encoder18reset_actual_angleEf
 132              	.LVL16:
 133              	.LBE43:
 134              	.LBE42:
  28:Core/Src/devs/interrupt.cpp **** 				count1 = 0;
 135              		.loc 1 28 0 discriminator 5
 136 0092 514B     		ldr	r3, .L27+32
 137 0094 0022     		movs	r2, #0
 138 0096 1A60     		str	r2, [r3]
 139              	.LBE39:
 140 0098 04E0     		b	.L1
 141              	.LVL17:
 142              	.L22:
 143              	.LBE36:
 144              	.LBE35:
 145              	.LBE34:
  14:Core/Src/devs/interrupt.cpp **** 		case GPIO_PIN_0 : {
 146              		.loc 1 14 0
 147 009a 0128     		cmp	r0, #1
 148 009c 02D1     		bne	.L1
 149              	.LBB67:
  16:Core/Src/devs/interrupt.cpp **** 			// printf("\n\n\t\t\t !!start_pressed!!\n\n");
 150              		.loc 1 16 0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 5


 151 009e 514B     		ldr	r3, .L27+44
 152 00a0 0122     		movs	r2, #1
 153 00a2 1A70     		strb	r2, [r3]
 154              	.LVL18:
 155              	.L1:
 156              	.LBE67:
 157              	.LBE33:
  29:Core/Src/devs/interrupt.cpp **** 			}
  30:Core/Src/devs/interrupt.cpp **** 			else{
  31:Core/Src/devs/interrupt.cpp **** 				count1++;
  32:Core/Src/devs/interrupt.cpp **** 			}
  33:Core/Src/devs/interrupt.cpp **** 			// printf("\n\n\t\t\tRobot interrupt0\t %d \t %d\n", leg[0].steps, temp);
  34:Core/Src/devs/interrupt.cpp ****                 } break;
  35:Core/Src/devs/interrupt.cpp **** 
  36:Core/Src/devs/interrupt.cpp ****                 case GPIO_PIN_14: {
  37:Core/Src/devs/interrupt.cpp **** 			float leg1_reset_angle = 90*PI/180;
  38:Core/Src/devs/interrupt.cpp **** 			float tolerence = 40*PI/180;
  39:Core/Src/devs/interrupt.cpp **** 			static int count2 = 0;
  40:Core/Src/devs/interrupt.cpp **** 			if(((leg[1].get_angle()>(leg1_reset_angle-tolerence)) && (leg[1].get_angle()<(leg1_reset_angle+t
  41:Core/Src/devs/interrupt.cpp ****                         	leg[1].reset_angle(leg1_reset_angle);
  42:Core/Src/devs/interrupt.cpp **** 				int temp = round(leg[1].get_actual_angle() / (360*PI/180));
  43:Core/Src/devs/interrupt.cpp **** 				leg[1].reset_actual_angle((int)(temp)*2*PI + leg1_reset_angle);
  44:Core/Src/devs/interrupt.cpp **** 				count2 = 0;
  45:Core/Src/devs/interrupt.cpp **** 			}
  46:Core/Src/devs/interrupt.cpp **** 			else{
  47:Core/Src/devs/interrupt.cpp **** 				count2++;
  48:Core/Src/devs/interrupt.cpp **** 			}
  49:Core/Src/devs/interrupt.cpp **** 			// printf("\n\n\t\t\tRobot interrupt1\t %d\n", leg[1].steps);
  50:Core/Src/devs/interrupt.cpp ****                 } break;
  51:Core/Src/devs/interrupt.cpp **** 
  52:Core/Src/devs/interrupt.cpp **** 		case GPIO_PIN_13: {
  53:Core/Src/devs/interrupt.cpp **** 			STEERING_FLAG = true;
  54:Core/Src/devs/interrupt.cpp **** 			float tolerence = 3*PI/180;
  55:Core/Src/devs/interrupt.cpp **** 			static int count3 = 0;
  56:Core/Src/devs/interrupt.cpp **** 			if(((steering.get_angle()>(-tolerence)) && (leg[1].get_angle()<(tolerence))) || (count3>2)){
  57:Core/Src/devs/interrupt.cpp **** 				steering.reset_angle(0*PI/180);
  58:Core/Src/devs/interrupt.cpp **** 				count3 = 0;
  59:Core/Src/devs/interrupt.cpp **** 			}
  60:Core/Src/devs/interrupt.cpp **** 			else{
  61:Core/Src/devs/interrupt.cpp **** 				count3++;
  62:Core/Src/devs/interrupt.cpp **** 			}
  63:Core/Src/devs/interrupt.cpp **** 			//  printf("\n\n\t\t\tsteering interrupt \t\n");
  64:Core/Src/devs/interrupt.cpp ****                 } break;
  65:Core/Src/devs/interrupt.cpp **** 	
  66:Core/Src/devs/interrupt.cpp ****         }
  67:Core/Src/devs/interrupt.cpp **** }...
 158              		.loc 1 67 0
 159 00a4 10BD     		pop	{r4, pc}
 160              	.LVL19:
 161              	.L23:
 162              	.LBB70:
 163              	.LBB68:
 164              	.LBB47:
 165              	.LBB46:
 166              	.LBB44:
 167              	.LBB45:
  47:Core/Inc/devs/leg.h **** 	float get_actual_angle(void){return encoder__.get_actual_angle();}
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 6


 168              		.loc 2 47 0
 169 00a6 4A48     		ldr	r0, .L27+24
 170 00a8 FFF7FEFF 		bl	_ZN7encoder9get_angleEv
 171              	.LVL20:
 172              	.LBE45:
 173              	.LBE44:
  24:Core/Src/devs/interrupt.cpp **** 			if(((leg[0].get_angle()>(leg0_reset_angle-tolerence)) && (leg[0].get_angle()<(leg0_reset_angle+t
 174              		.loc 1 24 0
 175 00ac DFED4E7A 		vldr.32	s15, .L27+48
 176 00b0 B4EEE70A 		vcmpe.f32	s0, s15
 177 00b4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 178 00b8 B8D5     		bpl	.L8
 179 00ba BBE7     		b	.L10
 180              	.L11:
  31:Core/Src/devs/interrupt.cpp **** 				count1++;
 181              		.loc 1 31 0
 182 00bc 0133     		adds	r3, r3, #1
 183 00be 464A     		ldr	r2, .L27+32
 184 00c0 1360     		str	r3, [r2]
 185 00c2 EFE7     		b	.L1
 186              	.LVL21:
 187              	.L6:
 188              	.LBE46:
 189              	.LBE47:
 190              	.LBB48:
 191              	.LBB49:
 192              	.LBB50:
 193              	.LBB51:
  47:Core/Inc/devs/leg.h **** 	float get_actual_angle(void){return encoder__.get_actual_angle();}
 194              		.loc 2 47 0
 195 00c4 4948     		ldr	r0, .L27+52
 196              	.LVL22:
 197 00c6 FFF7FEFF 		bl	_ZN7encoder9get_angleEv
 198              	.LVL23:
 199              	.LBE51:
 200              	.LBE50:
  40:Core/Src/devs/interrupt.cpp **** 			if(((leg[1].get_angle()>(leg1_reset_angle-tolerence)) && (leg[1].get_angle()<(leg1_reset_angle+t
 201              		.loc 1 40 0
 202 00ca DFED427A 		vldr.32	s15, .L27+28
 203 00ce B4EEE70A 		vcmpe.f32	s0, s15
 204 00d2 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 205 00d6 07DC     		bgt	.L24
 206              	.L12:
  40:Core/Src/devs/interrupt.cpp **** 			if(((leg[1].get_angle()>(leg1_reset_angle-tolerence)) && (leg[1].get_angle()<(leg1_reset_angle+t
 207              		.loc 1 40 0 is_stmt 0 discriminator 4
 208 00d8 454B     		ldr	r3, .L27+56
 209 00da 1B68     		ldr	r3, [r3]
 210 00dc 022B     		cmp	r3, #2
 211 00de 0DDC     		bgt	.L14
  47:Core/Src/devs/interrupt.cpp **** 				count2++;
 212              		.loc 1 47 0 is_stmt 1
 213 00e0 0133     		adds	r3, r3, #1
 214 00e2 434A     		ldr	r2, .L27+56
 215 00e4 1360     		str	r3, [r2]
 216 00e6 DDE7     		b	.L1
 217              	.L24:
 218              	.LVL24:
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 7


 219              	.LBB52:
 220              	.LBB53:
  47:Core/Inc/devs/leg.h **** 	float get_actual_angle(void){return encoder__.get_actual_angle();}
 221              		.loc 2 47 0
 222 00e8 4048     		ldr	r0, .L27+52
 223 00ea FFF7FEFF 		bl	_ZN7encoder9get_angleEv
 224              	.LVL25:
 225              	.LBE53:
 226              	.LBE52:
  40:Core/Src/devs/interrupt.cpp **** 			if(((leg[1].get_angle()>(leg1_reset_angle-tolerence)) && (leg[1].get_angle()<(leg1_reset_angle+t
 227              		.loc 1 40 0
 228 00ee DFED3E7A 		vldr.32	s15, .L27+48
 229 00f2 B4EEE70A 		vcmpe.f32	s0, s15
 230 00f6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 231 00fa EDD5     		bpl	.L12
 232              	.L14:
 233              	.LBB54:
  41:Core/Src/devs/interrupt.cpp ****                         	leg[1].reset_angle(leg1_reset_angle);
 234              		.loc 1 41 0 discriminator 5
 235 00fc 3D4C     		ldr	r4, .L27+60
 236 00fe 9FED380A 		vldr.32	s0, .L27+40
 237 0102 2046     		mov	r0, r4
 238 0104 FFF7FEFF 		bl	_ZN3leg11reset_angleEf
 239              	.LVL26:
 240              	.LBB55:
 241              	.LBB56:
 242              		.loc 2 48 0 discriminator 5
 243 0108 3C34     		adds	r4, r4, #60
 244              	.LVL27:
 245 010a 2046     		mov	r0, r4
 246 010c FFF7FEFF 		bl	_ZN7encoder16get_actual_angleEv
 247              	.LVL28:
 248              	.LBE56:
 249              	.LBE55:
  42:Core/Src/devs/interrupt.cpp **** 				int temp = round(leg[1].get_actual_angle() / (360*PI/180));
 250              		.loc 1 42 0 discriminator 5
 251 0110 10EE100A 		vmov	r0, s0
 252 0114 FFF7FEFF 		bl	__aeabi_f2d
 253              	.LVL29:
 254 0118 27A3     		adr	r3, .L27
 255 011a D3E90023 		ldrd	r2, [r3]
 256 011e FFF7FEFF 		bl	__aeabi_ddiv
 257              	.LVL30:
 258 0122 41EC100B 		vmov	d0, r0, r1
 259 0126 FFF7FEFF 		bl	round
 260              	.LVL31:
 261 012a 51EC100B 		vmov	r0, r1, d0
 262 012e FFF7FEFF 		bl	__aeabi_d2iz
 263              	.LVL32:
  43:Core/Src/devs/interrupt.cpp **** 				leg[1].reset_actual_angle((int)(temp)*2*PI + leg1_reset_angle);
 264              		.loc 1 43 0 discriminator 5
 265 0132 4000     		lsls	r0, r0, #1
 266              	.LVL33:
 267 0134 FFF7FEFF 		bl	__aeabi_i2d
 268              	.LVL34:
 269 0138 21A3     		adr	r3, .L27+8
 270 013a D3E90023 		ldrd	r2, [r3]
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 8


 271 013e FFF7FEFF 		bl	__aeabi_dmul
 272              	.LVL35:
 273 0142 21A3     		adr	r3, .L27+16
 274 0144 D3E90023 		ldrd	r2, [r3]
 275 0148 FFF7FEFF 		bl	__aeabi_dadd
 276              	.LVL36:
 277 014c FFF7FEFF 		bl	__aeabi_d2f
 278              	.LVL37:
 279              	.LBB57:
 280              	.LBB58:
  40:Core/Inc/devs/leg.h **** 	void calculate_omega();
 281              		.loc 2 40 0 discriminator 5
 282 0150 00EE100A 		vmov	s0, r0
 283 0154 2046     		mov	r0, r4
 284              	.LVL38:
 285 0156 FFF7FEFF 		bl	_ZN7encoder18reset_actual_angleEf
 286              	.LVL39:
 287              	.LBE58:
 288              	.LBE57:
  44:Core/Src/devs/interrupt.cpp **** 				count2 = 0;
 289              		.loc 1 44 0 discriminator 5
 290 015a 254B     		ldr	r3, .L27+56
 291 015c 0022     		movs	r2, #0
 292 015e 1A60     		str	r2, [r3]
 293              	.LBE54:
 294 0160 A0E7     		b	.L1
 295              	.LVL40:
 296              	.L3:
 297              	.LBE49:
 298              	.LBE48:
 299              	.LBB59:
  53:Core/Src/devs/interrupt.cpp **** 			STEERING_FLAG = true;
 300              		.loc 1 53 0
 301 0162 254B     		ldr	r3, .L27+64
 302 0164 0122     		movs	r2, #1
 303 0166 1A70     		strb	r2, [r3]
 304              	.LVL41:
 305              	.LBB60:
 306              	.LBB61:
 307              		.file 3 "Core/Inc/devs/steering.h"
   1:Core/Inc/devs/steering.h **** /**
   2:Core/Inc/devs/steering.h ****  * steering.h
   3:Core/Inc/devs/steering.h ****  *
   4:Core/Inc/devs/steering.h ****  * \brief Provide control over steering of the horse
   5:Core/Inc/devs/steering.h ****  *
   6:Core/Inc/devs/steering.h ****  * This file is meant as an wrapper to the elements in the encoder. 
   7:Core/Inc/devs/steering.h ****  * It uses the functions of other headers (ie motor.h, encoder.h, 
   8:Core/Inc/devs/steering.h ****  * limit_switch.h and pid.h tocontrol all the functions available 
   9:Core/Inc/devs/steering.h ****  * in the steering.
  10:Core/Inc/devs/steering.h ****  *
  11:Core/Inc/devs/steering.h ****  * \author 	$Author 	: Prashant_Bhatta
  12:Core/Inc/devs/steering.h ****  * \date 	$Date		: 2005/04/14 14:16:20 $
  13:Core/Inc/devs/steering.h ****  * \contact	$Contact	: 073bex425.prashant@pcampus.edu.np
  14:Core/Inc/devs/steering.h ****  *
  15:Core/Inc/devs/steering.h ****  */
  16:Core/Inc/devs/steering.h **** #ifndef _STEERING_H_
  17:Core/Inc/devs/steering.h **** #define _STEERING_H_
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 9


  18:Core/Inc/devs/steering.h **** 
  19:Core/Inc/devs/steering.h **** #include "motor.h"
  20:Core/Inc/devs/steering.h **** #include "encoder.h"
  21:Core/Inc/devs/steering.h **** #include "pid.h"
  22:Core/Inc/devs/steering.h **** #include "limit_switch.h"
  23:Core/Inc/devs/steering.h **** 
  24:Core/Inc/devs/steering.h **** class steering
  25:Core/Inc/devs/steering.h **** {
  26:Core/Inc/devs/steering.h **** public:
  27:Core/Inc/devs/steering.h **** 	/// These lines of codes are just for protection of random defination of the objects.
  28:Core/Inc/devs/steering.h **** 	steering(){}
  29:Core/Inc/devs/steering.h **** 	steering(steering &&) = default;
  30:Core/Inc/devs/steering.h **** 	steering(const steering &) = default;
  31:Core/Inc/devs/steering.h **** 	steering &operator=(steering &&) = default;
  32:Core/Inc/devs/steering.h **** 	steering &operator=(const steering &) = default;
  33:Core/Inc/devs/steering.h **** 	~steering(){}
  34:Core/Inc/devs/steering.h **** 
  35:Core/Inc/devs/steering.h **** 	/**
  36:Core/Inc/devs/steering.h **** 	 * \brief This function setups the configurations for the steering
  37:Core/Inc/devs/steering.h **** 	 * \param motor: pointer to motor_config which contains all the 
  38:Core/Inc/devs/steering.h **** 	 * 		configurations for a motor
  39:Core/Inc/devs/steering.h **** 	 * \param encoder: pointer to encoder_config which contains all the 
  40:Core/Inc/devs/steering.h **** 	 * 		configurations for a motor  
  41:Core/Inc/devs/steering.h **** 	 * \return void
  42:Core/Inc/devs/steering.h **** 	 */
  43:Core/Inc/devs/steering.h ****         void set_config(motor_config *motor, encoder_config *encoder) { 
  44:Core/Inc/devs/steering.h **** 		motor__.set_config(motor);
  45:Core/Inc/devs/steering.h **** 		encoder__.set_config(encoder);
  46:Core/Inc/devs/steering.h **** 	}
  47:Core/Inc/devs/steering.h **** 
  48:Core/Inc/devs/steering.h **** 	/**
  49:Core/Inc/devs/steering.h **** 	 * \brief Sets constants for PID algorithm
  50:Core/Inc/devs/steering.h **** 	 * \param kp,ki,kd: constants for PID
  51:Core/Inc/devs/steering.h **** 	 * \param lower_limit, upper_limit: These are the maximum output a motor 
  52:Core/Inc/devs/steering.h **** 	 * 	   can give with gear reduction(in omegas)
  53:Core/Inc/devs/steering.h **** 	 * \return void
  54:Core/Inc/devs/steering.h **** 	 */
  55:Core/Inc/devs/steering.h **** 	void set_PID_constants(float kp, float ki, float kd, float lower_limit, float upper_limit) {
  56:Core/Inc/devs/steering.h **** 		dpid_.set_P(kp);
  57:Core/Inc/devs/steering.h **** 		dpid_.set_I(ki);
  58:Core/Inc/devs/steering.h **** 		dpid_.set_D(kd);
  59:Core/Inc/devs/steering.h **** 		dpid_.set_Limits(upper_limit, lower_limit);
  60:Core/Inc/devs/steering.h **** 	}
  61:Core/Inc/devs/steering.h **** 
  62:Core/Inc/devs/steering.h **** 	/**
  63:Core/Inc/devs/steering.h **** 	 * \brief Sets constants for Angle_PID algorithm
  64:Core/Inc/devs/steering.h **** 	 * \param kp,ki,kd: constants for Anggle_PID
  65:Core/Inc/devs/steering.h **** 	 * \param lower_limit, upper_limit: These are the maximum output a motor 
  66:Core/Inc/devs/steering.h **** 	 * 	   can give with gear reduction(in omegas)
  67:Core/Inc/devs/steering.h **** 	 * \return void
  68:Core/Inc/devs/steering.h **** 	 */
  69:Core/Inc/devs/steering.h **** 	void set_angle_PID_constants(float kp, float ki, float kd, float lower_limit, float upper_limit) {
  70:Core/Inc/devs/steering.h **** 		apid_.set_P(kp);
  71:Core/Inc/devs/steering.h **** 		apid_.set_I(ki);
  72:Core/Inc/devs/steering.h **** 		apid_.set_D(kd);
  73:Core/Inc/devs/steering.h **** 		apid_.set_Limits(upper_limit, lower_limit);
  74:Core/Inc/devs/steering.h **** 	}
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 10


  75:Core/Inc/devs/steering.h **** 
  76:Core/Inc/devs/steering.h **** 
  77:Core/Inc/devs/steering.h **** 	/** 
  78:Core/Inc/devs/steering.h **** 	 * \brief sets omega for the steering
  79:Core/Inc/devs/steering.h **** 	 * 
  80:Core/Inc/devs/steering.h **** 	 */
  81:Core/Inc/devs/steering.h **** 	void set_omega(float omega);
  82:Core/Inc/devs/steering.h **** 
  83:Core/Inc/devs/steering.h **** 	/** 
  84:Core/Inc/devs/steering.h **** 	 * \brief sets angle for the steering
  85:Core/Inc/devs/steering.h **** 	 * 
  86:Core/Inc/devs/steering.h **** 	 */
  87:Core/Inc/devs/steering.h **** 	void set_angle(float angle);
  88:Core/Inc/devs/steering.h **** 
  89:Core/Inc/devs/steering.h **** 	/**
  90:Core/Inc/devs/steering.h **** 	 * \brief resets the angle provided by the encoder
  91:Core/Inc/devs/steering.h **** 	 * \param angle_in_radian at which it is to be reset
  92:Core/Inc/devs/steering.h **** 	 * \return void
  93:Core/Inc/devs/steering.h **** 	 */
  94:Core/Inc/devs/steering.h **** 	void reset_angle(float angle_in_radians) {encoder__.reset_angle(angle_in_radians);}
  95:Core/Inc/devs/steering.h **** 
  96:Core/Inc/devs/steering.h **** 	/**
  97:Core/Inc/devs/steering.h **** 	 * \brief calculates omega of the steering motor
  98:Core/Inc/devs/steering.h **** 	 * \remark Dont forget to call this function every 10 ms
  99:Core/Inc/devs/steering.h **** 	 * \param void
 100:Core/Inc/devs/steering.h **** 	 * \return void
 101:Core/Inc/devs/steering.h **** 	 */
 102:Core/Inc/devs/steering.h **** 	void calculate_omega(){	encoder__.calculate_omega();}
 103:Core/Inc/devs/steering.h **** 
 104:Core/Inc/devs/steering.h **** 	/**
 105:Core/Inc/devs/steering.h **** 	 * \brief returns the current omega calculated by the encoder
 106:Core/Inc/devs/steering.h **** 	 */
 107:Core/Inc/devs/steering.h **** 	float get_omega(void){return encoder__.get_omega();}
 108:Core/Inc/devs/steering.h **** 
 109:Core/Inc/devs/steering.h **** 	/**
 110:Core/Inc/devs/steering.h **** 	 * \brief returns the current angle calculated by the encoder
 111:Core/Inc/devs/steering.h **** 	 */
 112:Core/Inc/devs/steering.h **** 	float get_angle(void){return encoder__.get_angle();}
 308              		.loc 3 112 0
 309 0168 2448     		ldr	r0, .L27+68
 310              	.LVL42:
 311 016a FFF7FEFF 		bl	_ZN7encoder9get_angleEv
 312              	.LVL43:
 313              	.LBE61:
 314              	.LBE60:
  56:Core/Src/devs/interrupt.cpp **** 			if(((steering.get_angle()>(-tolerence)) && (leg[1].get_angle()<(tolerence))) || (count3>2)){
 315              		.loc 1 56 0
 316 016e DFED247A 		vldr.32	s15, .L27+72
 317 0172 B4EEE70A 		vcmpe.f32	s0, s15
 318 0176 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 319 017a 0CDC     		bgt	.L25
 320              	.L15:
  56:Core/Src/devs/interrupt.cpp **** 			if(((steering.get_angle()>(-tolerence)) && (leg[1].get_angle()<(tolerence))) || (count3>2)){
 321              		.loc 1 56 0 is_stmt 0 discriminator 4
 322 017c 214B     		ldr	r3, .L27+76
 323 017e 1B68     		ldr	r3, [r3]
 324 0180 022B     		cmp	r3, #2
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 11


 325 0182 13DD     		ble	.L26
 326              	.L17:
 327              	.LVL44:
 328              	.LBB62:
 329              	.LBB63:
  94:Core/Inc/devs/steering.h **** 
 330              		.loc 3 94 0 is_stmt 1 discriminator 5
 331 0184 9FED200A 		vldr.32	s0, .L27+80
 332 0188 1C48     		ldr	r0, .L27+68
 333 018a FFF7FEFF 		bl	_ZN7encoder11reset_angleEf
 334              	.LVL45:
 335              	.LBE63:
 336              	.LBE62:
  58:Core/Src/devs/interrupt.cpp **** 				count3 = 0;
 337              		.loc 1 58 0 discriminator 5
 338 018e 1D4B     		ldr	r3, .L27+76
 339 0190 0022     		movs	r2, #0
 340 0192 1A60     		str	r2, [r3]
 341              	.LBE59:
 342              	.LBE68:
 343              	.LBE70:
 344              		.loc 1 67 0 discriminator 5
 345 0194 86E7     		b	.L1
 346              	.L25:
 347              	.LVL46:
 348              	.LBB71:
 349              	.LBB69:
 350              	.LBB66:
 351              	.LBB64:
 352              	.LBB65:
  47:Core/Inc/devs/leg.h **** 	float get_actual_angle(void){return encoder__.get_actual_angle();}
 353              		.loc 2 47 0
 354 0196 1548     		ldr	r0, .L27+52
 355 0198 FFF7FEFF 		bl	_ZN7encoder9get_angleEv
 356              	.LVL47:
 357              	.LBE65:
 358              	.LBE64:
  56:Core/Src/devs/interrupt.cpp **** 			if(((steering.get_angle()>(-tolerence)) && (leg[1].get_angle()<(tolerence))) || (count3>2)){
 359              		.loc 1 56 0
 360 019c DFED1B7A 		vldr.32	s15, .L27+84
 361 01a0 B4EEE70A 		vcmpe.f32	s0, s15
 362 01a4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 363 01a8 ECD4     		bmi	.L17
 364 01aa E7E7     		b	.L15
 365              	.L26:
  61:Core/Src/devs/interrupt.cpp **** 				count3++;
 366              		.loc 1 61 0
 367 01ac 0133     		adds	r3, r3, #1
 368 01ae 154A     		ldr	r2, .L27+76
 369 01b0 1360     		str	r3, [r2]
 370 01b2 77E7     		b	.L1
 371              	.L28:
 372 01b4 AFF30080 		.align	3
 373              	.L27:
 374 01b8 182D4454 		.word	1413754136
 375 01bc FB211940 		.word	1075388923
 376 01c0 182D4454 		.word	1413754136
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 12


 377 01c4 FB210940 		.word	1074340347
 378 01c8 00000060 		.word	1610612736
 379 01cc FB21F93F 		.word	1073291771
 380 01d0 3C000000 		.word	leg+60
 381 01d4 F4665F3F 		.word	1063216884
 382 01d8 00000000 		.word	.LANCHOR0
 383 01dc 00000000 		.word	leg
 384 01e0 DB0FC93F 		.word	1070141403
 385 01e4 00000000 		.word	ROBOT_START_FLAG
 386 01e8 1E361140 		.word	1074869790
 387 01ec 94000000 		.word	leg+148
 388 01f0 00000000 		.word	.LANCHOR1
 389 01f4 58000000 		.word	leg+88
 390 01f8 00000000 		.word	STEERING_FLAG
 391 01fc 0C000000 		.word	steering+12
 392 0200 507756BD 		.word	-1118406832
 393 0204 00000000 		.word	.LANCHOR2
 394 0208 00000000 		.word	0
 395 020c 5077563D 		.word	1029076816
 396              	.LBE66:
 397              	.LBE69:
 398              	.LBE71:
 399              		.cfi_endproc
 400              	.LFE492:
 402              		.section	.bss._ZZ22HAL_GPIO_EXTI_CallbackE6count1,"aw",%nobits
 403              		.align	2
 404              		.set	.LANCHOR0,. + 0
 407              	_ZZ22HAL_GPIO_EXTI_CallbackE6count1:
 408 0000 00000000 		.space	4
 409              		.section	.bss._ZZ22HAL_GPIO_EXTI_CallbackE6count2,"aw",%nobits
 410              		.align	2
 411              		.set	.LANCHOR1,. + 0
 414              	_ZZ22HAL_GPIO_EXTI_CallbackE6count2:
 415 0000 00000000 		.space	4
 416              		.section	.bss._ZZ22HAL_GPIO_EXTI_CallbackE6count3,"aw",%nobits
 417              		.align	2
 418              		.set	.LANCHOR2,. + 0
 421              	_ZZ22HAL_GPIO_EXTI_CallbackE6count3:
 422 0000 00000000 		.space	4
 423              		.text
 424              	.Letext0:
 425              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 426              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 427              		.file 6 "Drivers/CMSIS/Include/core_cm4.h"
 428              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 429              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 430              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 431              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 432              		.file 11 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eab
 433              		.file 12 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 434              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 435              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 436              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 437              		.file 16 "Core/Inc/periphs/tim.h"
 438              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 439              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 440              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 13


 441              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 442              		.file 21 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 443              		.file 22 "Core/Inc/devs/motor.h"
 444              		.file 23 "Core/Inc/devs/encoder.h"
 445              		.file 24 "Core/Inc/utils/pid_algorithms.h"
 446              		.file 25 "Core/Inc/devs/limit_switch.h"
 447              		.file 26 "<built-in>"
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 interrupt.cpp
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:25     .text.HAL_GPIO_EXTI_Callback:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:32     .text.HAL_GPIO_EXTI_Callback:00000000 HAL_GPIO_EXTI_Callback
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:374    .text.HAL_GPIO_EXTI_Callback:000001b8 $d
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:403    .bss._ZZ22HAL_GPIO_EXTI_CallbackE6count1:00000000 $d
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:407    .bss._ZZ22HAL_GPIO_EXTI_CallbackE6count1:00000000 _ZZ22HAL_GPIO_EXTI_CallbackE6count1
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:410    .bss._ZZ22HAL_GPIO_EXTI_CallbackE6count2:00000000 $d
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:414    .bss._ZZ22HAL_GPIO_EXTI_CallbackE6count2:00000000 _ZZ22HAL_GPIO_EXTI_CallbackE6count2
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:417    .bss._ZZ22HAL_GPIO_EXTI_CallbackE6count3:00000000 $d
C:\Users\Prashant\AppData\Local\Temp\cclRZHLz.s:421    .bss._ZZ22HAL_GPIO_EXTI_CallbackE6count3:00000000 _ZZ22HAL_GPIO_EXTI_CallbackE6count3

UNDEFINED SYMBOLS
__aeabi_f2d
__aeabi_ddiv
__aeabi_d2iz
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
_ZN7encoder9get_angleEv
_ZN3leg11reset_angleEf
_ZN7encoder16get_actual_angleEv
round
_ZN7encoder18reset_actual_angleEf
_ZN7encoder11reset_angleEf
leg
ROBOT_START_FLAG
STEERING_FLAG
steering
