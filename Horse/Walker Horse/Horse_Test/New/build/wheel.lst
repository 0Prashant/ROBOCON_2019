ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"wheel.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.time_period,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	time_period
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	time_period:
  27              	.LFB126:
  28              		.file 1 "Core/Src/wheel.c"
   1:Core/Src/wheel.c **** /*
   2:Core/Src/wheel.c ****  * wheel.c
   3:Core/Src/wheel.c ****  *
   4:Core/Src/wheel.c ****  * Created : 10/1/2018
   5:Core/Src/wheel.c ****  */
   6:Core/Src/wheel.c **** 
   7:Core/Src/wheel.c **** #include "wheel.h"
   8:Core/Src/wheel.c **** 
   9:Core/Src/wheel.c **** 
  10:Core/Src/wheel.c **** uint16_t time_period(uint16_t PWM_frequency)
  11:Core/Src/wheel.c **** {
  29              		.loc 1 11 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  12:Core/Src/wheel.c ****         if (PWM_frequency < 2000) { //MIN PWM_FREQUENCY = 1281.738 for time period to be 16 bit
  34              		.loc 1 12 0
  35 0000 B0F5FA6F 		cmp	r0, #2000
  11:Core/Src/wheel.c ****         if (PWM_frequency < 2000) { //MIN PWM_FREQUENCY = 1281.738 for time period to be 16 bit
  36              		.loc 1 11 0
  37 0004 10B5     		push	{r4, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
  41              		.cfi_offset 14, -4
  11:Core/Src/wheel.c ****         if (PWM_frequency < 2000) { //MIN PWM_FREQUENCY = 1281.738 for time period to be 16 bit
  42              		.loc 1 11 0
  43 0006 0446     		mov	r4, r0
  44              		.loc 1 12 0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 2


  45 0008 03D2     		bcs	.L2
  13:Core/Src/wheel.c ****                 _Error_Handler(__FILE__, __LINE__);
  46              		.loc 1 13 0
  47 000a 0D21     		movs	r1, #13
  48 000c 0448     		ldr	r0, .L5
  49              	.LVL1:
  50 000e FFF7FEFF 		bl	_Error_Handler
  51              	.LVL2:
  52              	.L2:
  14:Core/Src/wheel.c ****         }
  15:Core/Src/wheel.c ****         return ((PWM_TIMER_FREQUENCY / 2) / PWM_frequency) - 1; // In Center aligned mode period do
  53              		.loc 1 15 0
  54 0012 0448     		ldr	r0, .L5+4
  55 0014 90FBF4F0 		sdiv	r0, r0, r4
  56 0018 0138     		subs	r0, r0, #1
  16:Core/Src/wheel.c **** }
  57              		.loc 1 16 0
  58 001a 80B2     		uxth	r0, r0
  59 001c 10BD     		pop	{r4, pc}
  60              	.L6:
  61 001e 00BF     		.align	2
  62              	.L5:
  63 0020 00000000 		.word	.LC0
  64 0024 00BD0105 		.word	84000000
  65              		.cfi_endproc
  66              	.LFE126:
  68              		.section	.text.set_DutyCycle_Primary,"ax",%progbits
  69              		.align	1
  70              		.p2align 2,,3
  71              		.global	set_DutyCycle_Primary
  72              		.syntax unified
  73              		.thumb
  74              		.thumb_func
  75              		.fpu fpv4-sp-d16
  77              	set_DutyCycle_Primary:
  78              	.LFB127:
  17:Core/Src/wheel.c **** 
  18:Core/Src/wheel.c **** /* SET DUTYCYCLE primary function */
  19:Core/Src/wheel.c **** void set_DutyCycle_Primary(TIM_HandleTypeDef *htim, uint32_t Channel, uint16_t dutyCycle)
  20:Core/Src/wheel.c **** {
  79              		.loc 1 20 0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 0
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  83              		@ link register save eliminated.
  84              	.LVL3:
  85 0000 10B4     		push	{r4}
  86              	.LCFI1:
  87              		.cfi_def_cfa_offset 4
  88              		.cfi_offset 4, -4
  21:Core/Src/wheel.c ****         uint16_t mapped_value;
  22:Core/Src/wheel.c ****         mapped_value = (time_period(MOTOR_DRIVER_FREQUENCY) * dutyCycle) / 65535;
  23:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
  89              		.loc 1 23 0
  90 0002 0068     		ldr	r0, [r0]
  91              	.LVL4:
  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 3


  92              		.loc 1 22 0
  93 0004 074C     		ldr	r4, .L9
  94 0006 42F60313 		movw	r3, #10499
  95 000a 03FB02F2 		mul	r2, r3, r2
  96              	.LVL5:
  97 000e A4FB0232 		umull	r3, r2, r4, r2
  98              		.loc 1 23 0
  99 0012 3430     		adds	r0, r0, #52
 100 0014 8908     		lsrs	r1, r1, #2
 101              	.LVL6:
  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 102              		.loc 1 22 0
 103 0016 D20B     		lsrs	r2, r2, #15
 104              		.loc 1 23 0
 105 0018 40F82120 		str	r2, [r0, r1, lsl #2]
  24:Core/Src/wheel.c **** }
 106              		.loc 1 24 0
 107 001c 5DF8044B 		ldr	r4, [sp], #4
 108              	.LCFI2:
 109              		.cfi_restore 4
 110              		.cfi_def_cfa_offset 0
 111 0020 7047     		bx	lr
 112              	.L10:
 113 0022 00BF     		.align	2
 114              	.L9:
 115 0024 01800080 		.word	-2147450879
 116              		.cfi_endproc
 117              	.LFE127:
 119              		.section	.text.float_abs,"ax",%progbits
 120              		.align	1
 121              		.p2align 2,,3
 122              		.global	float_abs
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 126              		.fpu fpv4-sp-d16
 128              	float_abs:
 129              	.LFB128:
  25:Core/Src/wheel.c **** 
  26:Core/Src/wheel.c **** 
  27:Core/Src/wheel.c **** float float_abs(float x)
  28:Core/Src/wheel.c **** {
 130              		.loc 1 28 0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134              		@ link register save eliminated.
 135              	.LVL7:
  29:Core/Src/wheel.c ****         if (x < 0)
 136              		.loc 1 29 0
 137 0000 B5EEC00A 		vcmpe.f32	s0, #0
 138 0004 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  30:Core/Src/wheel.c ****         {
  31:Core/Src/wheel.c ****                 return (-1 * x);
 139              		.loc 1 31 0
 140 0008 48BF     		it	mi
 141 000a B1EE400A 		vnegmi.f32	s0, s0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 4


 142              	.LVL8:
  32:Core/Src/wheel.c ****         }
  33:Core/Src/wheel.c ****         return x;
  34:Core/Src/wheel.c **** }
 143              		.loc 1 34 0
 144 000e 7047     		bx	lr
 145              		.cfi_endproc
 146              	.LFE128:
 148              		.section	.text.calculate_omega,"ax",%progbits
 149              		.align	1
 150              		.p2align 2,,3
 151              		.global	calculate_omega
 152              		.syntax unified
 153              		.thumb
 154              		.thumb_func
 155              		.fpu fpv4-sp-d16
 157              	calculate_omega:
 158              	.LFB129:
  35:Core/Src/wheel.c **** 
  36:Core/Src/wheel.c **** void calculate_omega(struct Wheel *w)
  37:Core/Src/wheel.c **** {
 159              		.loc 1 37 0
 160              		.cfi_startproc
 161              		@ args = 0, pretend = 0, frame = 0
 162              		@ frame_needed = 0, uses_anonymous_args = 0
 163              		@ link register save eliminated.
 164              	.LVL9:
  38:Core/Src/wheel.c ****         // v = wr
  39:Core/Src/wheel.c ****         w->omega = w->velcoity / w->radius;
 165              		.loc 1 39 0
 166 0000 D0ED026A 		vldr.32	s13, [r0, #8]
 167 0004 90ED017A 		vldr.32	s14, [r0, #4]
 168 0008 C6EE877A 		vdiv.f32	s15, s13, s14
 169 000c C0ED037A 		vstr.32	s15, [r0, #12]
  40:Core/Src/wheel.c **** }
 170              		.loc 1 40 0
 171 0010 7047     		bx	lr
 172              		.cfi_endproc
 173              	.LFE129:
 175 0012 00BF     		.section	.text.set_Direction,"ax",%progbits
 176              		.align	1
 177              		.p2align 2,,3
 178              		.global	set_Direction
 179              		.syntax unified
 180              		.thumb
 181              		.thumb_func
 182              		.fpu fpv4-sp-d16
 184              	set_Direction:
 185              	.LFB130:
  41:Core/Src/wheel.c **** 
  42:Core/Src/wheel.c **** void set_Direction(struct Wheel *w, enum Direction d)
  43:Core/Src/wheel.c **** {
 186              		.loc 1 43 0
 187              		.cfi_startproc
 188              		@ args = 0, pretend = 0, frame = 0
 189              		@ frame_needed = 0, uses_anonymous_args = 0
 190              	.LVL10:
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 5


 191 0000 0A46     		mov	r2, r1
 192 0002 10B5     		push	{r4, lr}
 193              	.LCFI3:
 194              		.cfi_def_cfa_offset 8
 195              		.cfi_offset 4, -8
 196              		.cfi_offset 14, -4
 197              		.loc 1 43 0
 198 0004 0446     		mov	r4, r0
  44:Core/Src/wheel.c ****         if (d == DIR_ANTICLOCKWISE)       // AHEAD
 199              		.loc 1 44 0
 200 0006 012A     		cmp	r2, #1
 201 0008 0069     		ldr	r0, [r0, #16]
 202              	.LVL11:
 203 000a A18A     		ldrh	r1, [r4, #20]
 204              	.LVL12:
 205 000c 01D0     		beq	.L20
  45:Core/Src/wheel.c ****         {
  46:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_SET);
  47:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
  48:Core/Src/wheel.c ****         }
  49:Core/Src/wheel.c ****         else if (d == DIR_CLOCKWISE)  // BACK
 206              		.loc 1 49 0
 207 000e 4AB1     		cbz	r2, .L21
  50:Core/Src/wheel.c ****         {
  51:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_RESET);
  52:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
  53:Core/Src/wheel.c ****         }
  54:Core/Src/wheel.c ****         else                    // HALT
  55:Core/Src/wheel.c ****         {
  56:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_RESET);
 208              		.loc 1 56 0
 209 0010 0022     		movs	r2, #0
 210              	.L20:
 211 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 212              	.LVL13:
  57:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 213              		.loc 1 57 0
 214 0016 A18B     		ldrh	r1, [r4, #28]
 215 0018 A069     		ldr	r0, [r4, #24]
 216 001a 0022     		movs	r2, #0
  58:Core/Src/wheel.c ****         }
  59:Core/Src/wheel.c **** }
 217              		.loc 1 59 0
 218 001c BDE81040 		pop	{r4, lr}
 219              	.LCFI4:
 220              		.cfi_remember_state
 221              		.cfi_restore 14
 222              		.cfi_restore 4
 223              		.cfi_def_cfa_offset 0
 224              	.LVL14:
  57:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 225              		.loc 1 57 0
 226 0020 FFF7FEBF 		b	HAL_GPIO_WritePin
 227              	.LVL15:
 228              	.L21:
 229              	.LCFI5:
 230              		.cfi_restore_state
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 6


  51:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
 231              		.loc 1 51 0
 232 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 233              	.LVL16:
  52:Core/Src/wheel.c ****         }
 234              		.loc 1 52 0
 235 0028 A18B     		ldrh	r1, [r4, #28]
 236 002a A069     		ldr	r0, [r4, #24]
 237 002c 0122     		movs	r2, #1
 238              		.loc 1 59 0
 239 002e BDE81040 		pop	{r4, lr}
 240              	.LCFI6:
 241              		.cfi_restore 14
 242              		.cfi_restore 4
 243              		.cfi_def_cfa_offset 0
 244              	.LVL17:
  52:Core/Src/wheel.c ****         }
 245              		.loc 1 52 0
 246 0032 FFF7FEBF 		b	HAL_GPIO_WritePin
 247              	.LVL18:
 248              		.cfi_endproc
 249              	.LFE130:
 251 0036 00BF     		.section	.text.set_DutyCycle,"ax",%progbits
 252              		.align	1
 253              		.p2align 2,,3
 254              		.global	set_DutyCycle
 255              		.syntax unified
 256              		.thumb
 257              		.thumb_func
 258              		.fpu fpv4-sp-d16
 260              	set_DutyCycle:
 261              	.LFB131:
  60:Core/Src/wheel.c **** 
  61:Core/Src/wheel.c **** void set_DutyCycle(struct Wheel *w, uint16_t dutyCycle)
  62:Core/Src/wheel.c **** {
 262              		.loc 1 62 0
 263              		.cfi_startproc
 264              		@ args = 0, pretend = 0, frame = 0
 265              		@ frame_needed = 0, uses_anonymous_args = 0
 266              		@ link register save eliminated.
 267              	.LVL19:
 268              	.LBB24:
 269              	.LBB25:
  23:Core/Src/wheel.c **** }
 270              		.loc 1 23 0
 271 0000 D0E90820 		ldrd	r2, r0, [r0, #32]
 272              	.LVL20:
 273              	.LBE25:
 274              	.LBE24:
 275              		.loc 1 62 0
 276 0004 10B4     		push	{r4}
 277              	.LCFI7:
 278              		.cfi_def_cfa_offset 4
 279              		.cfi_offset 4, -4
 280              	.LBB27:
 281              	.LBB26:
  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 7


 282              		.loc 1 22 0
 283 0006 42F60313 		movw	r3, #10499
  23:Core/Src/wheel.c **** }
 284              		.loc 1 23 0
 285 000a 1268     		ldr	r2, [r2]
  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 286              		.loc 1 22 0
 287 000c 064C     		ldr	r4, .L24
 288 000e 03FB01F1 		mul	r1, r3, r1
 289              	.LVL21:
 290 0012 A4FB0131 		umull	r3, r1, r4, r1
  23:Core/Src/wheel.c **** }
 291              		.loc 1 23 0
 292 0016 3432     		adds	r2, r2, #52
 293 0018 8008     		lsrs	r0, r0, #2
 294              	.LVL22:
  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 295              		.loc 1 22 0
 296 001a C90B     		lsrs	r1, r1, #15
  23:Core/Src/wheel.c **** }
 297              		.loc 1 23 0
 298 001c 42F82010 		str	r1, [r2, r0, lsl #2]
 299              	.LVL23:
 300              	.LBE26:
 301              	.LBE27:
  63:Core/Src/wheel.c ****         set_DutyCycle_Primary(w->htim, w->channel, dutyCycle);
  64:Core/Src/wheel.c **** }
 302              		.loc 1 64 0
 303 0020 5DF8044B 		ldr	r4, [sp], #4
 304              	.LCFI8:
 305              		.cfi_restore 4
 306              		.cfi_def_cfa_offset 0
 307 0024 7047     		bx	lr
 308              	.L25:
 309 0026 00BF     		.align	2
 310              	.L24:
 311 0028 01800080 		.word	-2147450879
 312              		.cfi_endproc
 313              	.LFE131:
 315              		.global	__aeabi_f2d
 316              		.global	__aeabi_dmul
 317              		.global	__aeabi_d2uiz
 318              		.section	.text.set_Omega,"ax",%progbits
 319              		.align	1
 320              		.p2align 2,,3
 321              		.global	set_Omega
 322              		.syntax unified
 323              		.thumb
 324              		.thumb_func
 325              		.fpu fpv4-sp-d16
 327              	set_Omega:
 328              	.LFB132:
  65:Core/Src/wheel.c **** 
  66:Core/Src/wheel.c **** void set_Omega(struct Wheel *w, float omega)
  67:Core/Src/wheel.c **** {
 329              		.loc 1 67 0
 330              		.cfi_startproc
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 8


 331              		@ args = 0, pretend = 0, frame = 0
 332              		@ frame_needed = 0, uses_anonymous_args = 0
 333              	.LVL24:
 334 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 335              	.LCFI9:
 336              		.cfi_def_cfa_offset 24
 337              		.cfi_offset 3, -24
 338              		.cfi_offset 4, -20
 339              		.cfi_offset 5, -16
 340              		.cfi_offset 6, -12
 341              		.cfi_offset 7, -8
 342              		.cfi_offset 14, -4
 343              	.LBB54:
 344              	.LBB55:
  29:Core/Src/wheel.c ****         {
 345              		.loc 1 29 0
 346 0002 B5EEC00A 		vcmpe.f32	s0, #0
 347 0006 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 348              	.LBE55:
 349              	.LBE54:
 350              		.loc 1 67 0
 351 000a 2DED028B 		vpush.64	{d8}
 352              	.LCFI10:
 353              		.cfi_def_cfa_offset 32
 354              		.cfi_offset 80, -32
 355              		.cfi_offset 81, -28
 356              		.loc 1 67 0
 357 000e 0446     		mov	r4, r0
 358 0010 B0EE408A 		vmov.f32	s16, s0
 359              	.LVL25:
 360 0014 0569     		ldr	r5, [r0, #16]
 361 0016 868A     		ldrh	r6, [r0, #20]
 362              	.LBB57:
 363              	.LBB56:
  29:Core/Src/wheel.c ****         {
 364              		.loc 1 29 0
 365 0018 41D4     		bmi	.L41
 366              	.LVL26:
 367              	.LBE56:
 368              	.LBE57:
  68:Core/Src/wheel.c ****         uint16_t new_omega = (65535.0 / MAX_OMEGA) * float_abs(omega);
  69:Core/Src/wheel.c ****         if (omega > 0) {
 369              		.loc 1 69 0
 370 001a 16DC     		bgt	.L42
 371              	.LVL27:
 372              	.LBB58:
 373              	.LBB59:
  56:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 374              		.loc 1 56 0
 375 001c 3146     		mov	r1, r6
 376 001e 2846     		mov	r0, r5
 377              	.LVL28:
 378 0020 0022     		movs	r2, #0
 379 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 380              	.LVL29:
  57:Core/Src/wheel.c ****         }
 381              		.loc 1 57 0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 9


 382 0026 0022     		movs	r2, #0
 383 0028 A18B     		ldrh	r1, [r4, #28]
 384 002a A069     		ldr	r0, [r4, #24]
 385 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 386              	.LVL30:
 387              	.LBE59:
 388              	.LBE58:
 389              	.LBB60:
 390              	.LBB61:
 391              	.LBB62:
 392              	.LBB63:
  23:Core/Src/wheel.c **** }
 393              		.loc 1 23 0
 394 0030 D4E90832 		ldrd	r3, r2, [r4, #32]
 395 0034 1B68     		ldr	r3, [r3]
 396 0036 9208     		lsrs	r2, r2, #2
 397 0038 3433     		adds	r3, r3, #52
 398 003a 0021     		movs	r1, #0
 399 003c 43F82210 		str	r1, [r3, r2, lsl #2]
 400              	.LVL31:
 401              	.LBE63:
 402              	.LBE62:
 403              	.LBE61:
 404              	.LBE60:
  70:Core/Src/wheel.c ****                 set_Direction(w, DIR_ANTICLOCKWISE);
  71:Core/Src/wheel.c ****                 set_DutyCycle(w, new_omega);
  72:Core/Src/wheel.c ****         }
  73:Core/Src/wheel.c ****         else if (omega < 0) {
  74:Core/Src/wheel.c ****                 set_Direction(w, DIR_CLOCKWISE);
  75:Core/Src/wheel.c ****                 set_DutyCycle(w, new_omega);
  76:Core/Src/wheel.c ****         }
  77:Core/Src/wheel.c ****         else {
  78:Core/Src/wheel.c ****                 set_Direction(w, DIR_HALT);
  79:Core/Src/wheel.c ****                 set_DutyCycle(w, 0);
  80:Core/Src/wheel.c ****         }
  81:Core/Src/wheel.c ****         w->omega = omega;
 405              		.loc 1 81 0
 406 0040 84ED038A 		vstr.32	s16, [r4, #12]
  82:Core/Src/wheel.c **** }
 407              		.loc 1 82 0
 408 0044 BDEC028B 		vldm	sp!, {d8}
 409              	.LCFI11:
 410              		.cfi_remember_state
 411              		.cfi_restore 80
 412              		.cfi_restore 81
 413              		.cfi_def_cfa_offset 24
 414              	.LVL32:
 415 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 416              	.LVL33:
 417              	.L42:
 418              	.LCFI12:
 419              		.cfi_restore_state
  68:Core/Src/wheel.c ****         if (omega > 0) {
 420              		.loc 1 68 0
 421 004a 10EE100A 		vmov	r0, s0
 422              	.LVL34:
 423 004e FFF7FEFF 		bl	__aeabi_f2d
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 10


 424              	.LVL35:
 425 0052 21A3     		adr	r3, .L43
 426 0054 D3E90023 		ldrd	r2, [r3]
 427 0058 FFF7FEFF 		bl	__aeabi_dmul
 428              	.LVL36:
 429 005c FFF7FEFF 		bl	__aeabi_d2uiz
 430              	.LVL37:
 431 0060 87B2     		uxth	r7, r0
 432              	.LVL38:
 433              	.L29:
 434              	.LBB64:
 435              	.LBB65:
 436              	.LBB66:
  46:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 437              		.loc 1 46 0
 438 0062 0122     		movs	r2, #1
 439 0064 3146     		mov	r1, r6
 440 0066 2846     		mov	r0, r5
 441 0068 FFF7FEFF 		bl	HAL_GPIO_WritePin
 442              	.LVL39:
  47:Core/Src/wheel.c ****         }
 443              		.loc 1 47 0
 444 006c 0022     		movs	r2, #0
 445              	.LVL40:
 446              	.L40:
 447              	.LBE66:
 448              	.LBE65:
 449              	.LBE64:
 450              	.LBB67:
 451              	.LBB68:
  52:Core/Src/wheel.c ****         }
 452              		.loc 1 52 0
 453 006e A18B     		ldrh	r1, [r4, #28]
 454 0070 A069     		ldr	r0, [r4, #24]
 455 0072 FFF7FEFF 		bl	HAL_GPIO_WritePin
 456              	.LVL41:
 457              	.LBE68:
 458              	.LBE67:
 459              	.LBB70:
 460              	.LBB71:
 461              	.LBB72:
 462              	.LBB73:
  23:Core/Src/wheel.c **** }
 463              		.loc 1 23 0
 464 0076 236A     		ldr	r3, [r4, #32]
 465 0078 616A     		ldr	r1, [r4, #36]
 466 007a 1A68     		ldr	r2, [r3]
  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 467              		.loc 1 22 0
 468 007c 1848     		ldr	r0, .L43+8
 469 007e 42F60313 		movw	r3, #10499
 470 0082 03FB07F3 		mul	r3, r3, r7
 471 0086 A0FB0303 		umull	r0, r3, r0, r3
  23:Core/Src/wheel.c **** }
 472              		.loc 1 23 0
 473 008a 3432     		adds	r2, r2, #52
 474 008c 8908     		lsrs	r1, r1, #2
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 11


  22:Core/Src/wheel.c ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 475              		.loc 1 22 0
 476 008e DB0B     		lsrs	r3, r3, #15
  23:Core/Src/wheel.c **** }
 477              		.loc 1 23 0
 478 0090 42F82130 		str	r3, [r2, r1, lsl #2]
 479              	.LVL42:
 480              	.LBE73:
 481              	.LBE72:
 482              	.LBE71:
 483              	.LBE70:
  81:Core/Src/wheel.c **** }
 484              		.loc 1 81 0
 485 0094 84ED038A 		vstr.32	s16, [r4, #12]
 486              		.loc 1 82 0
 487 0098 BDEC028B 		vldm	sp!, {d8}
 488              	.LCFI13:
 489              		.cfi_remember_state
 490              		.cfi_restore 80
 491              		.cfi_restore 81
 492              		.cfi_def_cfa_offset 24
 493              	.LVL43:
 494 009c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 495              	.LVL44:
 496              	.L41:
 497              	.LCFI14:
 498              		.cfi_restore_state
  68:Core/Src/wheel.c ****         if (omega > 0) {
 499              		.loc 1 68 0
 500 009e F1EE407A 		vneg.f32	s15, s0
 501 00a2 17EE900A 		vmov	r0, s15
 502              	.LVL45:
 503 00a6 FFF7FEFF 		bl	__aeabi_f2d
 504              	.LVL46:
 505 00aa 0BA3     		adr	r3, .L43
 506 00ac D3E90023 		ldrd	r2, [r3]
 507 00b0 FFF7FEFF 		bl	__aeabi_dmul
 508              	.LVL47:
 509 00b4 FFF7FEFF 		bl	__aeabi_d2uiz
 510              	.LVL48:
  69:Core/Src/wheel.c ****                 set_Direction(w, DIR_ANTICLOCKWISE);
 511              		.loc 1 69 0
 512 00b8 B5EEC08A 		vcmpe.f32	s16, #0
 513 00bc F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  68:Core/Src/wheel.c ****         if (omega > 0) {
 514              		.loc 1 68 0
 515 00c0 87B2     		uxth	r7, r0
 516              	.LVL49:
  69:Core/Src/wheel.c ****                 set_Direction(w, DIR_ANTICLOCKWISE);
 517              		.loc 1 69 0
 518 00c2 CEDC     		bgt	.L29
 519              	.LVL50:
 520              	.LBB74:
 521              	.LBB69:
  51:Core/Src/wheel.c ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
 522              		.loc 1 51 0
 523 00c4 0022     		movs	r2, #0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 12


 524 00c6 3146     		mov	r1, r6
 525 00c8 2846     		mov	r0, r5
 526 00ca FFF7FEFF 		bl	HAL_GPIO_WritePin
 527              	.LVL51:
  52:Core/Src/wheel.c ****         }
 528              		.loc 1 52 0
 529 00ce 0122     		movs	r2, #1
 530 00d0 CDE7     		b	.L40
 531              	.L44:
 532 00d2 00BFAFF3 		.align	3
 532      0080
 533              	.L43:
 534 00d8 A7FF0DD0 		.word	-804388953
 535 00dc 7DBB9940 		.word	1083816829
 536 00e0 01800080 		.word	-2147450879
 537              	.LBE69:
 538              	.LBE74:
 539              		.cfi_endproc
 540              	.LFE132:
 542              		.section	.rodata.time_period.str1.4,"aMS",%progbits,1
 543              		.align	2
 544              	.LC0:
 545 0000 436F7265 		.ascii	"Core/Src/wheel.c\000"
 545      2F537263 
 545      2F776865 
 545      656C2E63 
 545      00
 546              		.text
 547              	.Letext0:
 548              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 549              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 550              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 551              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 552              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 553              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 554              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 555              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 556              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 557              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 558              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 559              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 560              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 561              		.file 15 "Core/Inc/tim.h"
 562              		.file 16 "Core/Inc/wheel.h"
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s 			page 13


DEFINED SYMBOLS
                            *ABS*:00000000 wheel.c
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:18     .text.time_period:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:26     .text.time_period:00000000 time_period
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:63     .text.time_period:00000020 $d
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:69     .text.set_DutyCycle_Primary:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:77     .text.set_DutyCycle_Primary:00000000 set_DutyCycle_Primary
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:115    .text.set_DutyCycle_Primary:00000024 $d
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:120    .text.float_abs:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:128    .text.float_abs:00000000 float_abs
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:149    .text.calculate_omega:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:157    .text.calculate_omega:00000000 calculate_omega
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:176    .text.set_Direction:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:184    .text.set_Direction:00000000 set_Direction
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:252    .text.set_DutyCycle:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:260    .text.set_DutyCycle:00000000 set_DutyCycle
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:311    .text.set_DutyCycle:00000028 $d
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:319    .text.set_Omega:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:327    .text.set_Omega:00000000 set_Omega
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:534    .text.set_Omega:000000d8 $d
C:\Users\Prashant\AppData\Local\Temp\ccsNTkJQ.s:543    .rodata.time_period.str1.4:00000000 $d

UNDEFINED SYMBOLS
_Error_Handler
HAL_GPIO_WritePin
__aeabi_f2d
__aeabi_dmul
__aeabi_d2uiz
