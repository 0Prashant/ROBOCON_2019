ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"wheel.cpp"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._ZL11time_periodt,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	_ZL11time_periodt:
  25              	.LFB359:
  26              		.file 1 "Core/Src/devs/wheel.cpp"
   1:Core/Src/devs/wheel.cpp **** /*
   2:Core/Src/devs/wheel.cpp ****  * wheel.c
   3:Core/Src/devs/wheel.cpp ****  *
   4:Core/Src/devs/wheel.cpp ****  * Created : 10/1/2018
   5:Core/Src/devs/wheel.cpp ****  */
   6:Core/Src/devs/wheel.cpp **** 
   7:Core/Src/devs/wheel.cpp **** #include "wheel.h"
   8:Core/Src/devs/wheel.cpp **** #include <math.h>
   9:Core/Src/devs/wheel.cpp **** 
  10:Core/Src/devs/wheel.cpp **** const float max_omega1[2]= { 8.5, 7};
  11:Core/Src/devs/wheel.cpp **** 
  12:Core/Src/devs/wheel.cpp **** static uint16_t time_period(uint16_t PWM_frequency)
  13:Core/Src/devs/wheel.cpp **** {
  27              		.loc 1 13 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 0446     		mov	r4, r0
  14:Core/Src/devs/wheel.cpp ****         if (PWM_frequency < 2000) { //MIN PWM_FREQUENCY = 1281.738 for time period to be 16 bit
  38              		.loc 1 14 0
  39 0004 B0F5FA6F 		cmp	r0, #2000
  40 0008 06D3     		bcc	.L4
  41              	.LVL1:
  42              	.L2:
  15:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
  16:Core/Src/devs/wheel.cpp ****         }
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 2


  17:Core/Src/devs/wheel.cpp ****         return ((PWM_TIMER_FREQUENCY / 2) / PWM_frequency) - 1; // In Center aligned mode period do
  43              		.loc 1 17 0
  44 000a 0648     		ldr	r0, .L5
  45 000c 90FBF4F0 		sdiv	r0, r0, r4
  46 0010 80B2     		uxth	r0, r0
  47 0012 0138     		subs	r0, r0, #1
  18:Core/Src/devs/wheel.cpp **** }
  48              		.loc 1 18 0
  49 0014 80B2     		uxth	r0, r0
  50 0016 10BD     		pop	{r4, pc}
  51              	.LVL2:
  52              	.L4:
  15:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
  53              		.loc 1 15 0
  54 0018 0F21     		movs	r1, #15
  55 001a 0348     		ldr	r0, .L5+4
  56              	.LVL3:
  57 001c FFF7FEFF 		bl	_Error_Handler
  58              	.LVL4:
  59 0020 F3E7     		b	.L2
  60              	.L6:
  61 0022 00BF     		.align	2
  62              	.L5:
  63 0024 00BD0105 		.word	84000000
  64 0028 00000000 		.word	.LC0
  65              		.cfi_endproc
  66              	.LFE359:
  68              		.section	.text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt,"ax",%progbits
  69              		.align	1
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  73              		.fpu fpv4-sp-d16
  75              	_ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:
  76              	.LFB360:
  19:Core/Src/devs/wheel.cpp **** 
  20:Core/Src/devs/wheel.cpp **** /* SET DUTYCYCLE primary function */
  21:Core/Src/devs/wheel.cpp **** static void set_DutyCycle_Primary(TIM_HandleTypeDef *htim, uint32_t Channel, uint16_t dutyCycle)
  22:Core/Src/devs/wheel.cpp **** {
  77              		.loc 1 22 0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              	.LVL5:
  82 0000 70B5     		push	{r4, r5, r6, lr}
  83              	.LCFI1:
  84              		.cfi_def_cfa_offset 16
  85              		.cfi_offset 4, -16
  86              		.cfi_offset 5, -12
  87              		.cfi_offset 6, -8
  88              		.cfi_offset 14, -4
  89 0002 0646     		mov	r6, r0
  90 0004 0D46     		mov	r5, r1
  91 0006 1446     		mov	r4, r2
  23:Core/Src/devs/wheel.cpp ****         uint16_t mapped_value;
  24:Core/Src/devs/wheel.cpp ****         mapped_value = (time_period(MOTOR_DRIVER_FREQUENCY) * dutyCycle) / 65535;
  92              		.loc 1 24 0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 3


  93 0008 4FF4FA50 		mov	r0, #8000
  94              	.LVL6:
  95 000c FFF7FEFF 		bl	_ZL11time_periodt
  96              	.LVL7:
  97 0010 00FB04F0 		mul	r0, r0, r4
  98 0014 064B     		ldr	r3, .L9
  99 0016 83FB0023 		smull	r2, r3, r3, r0
 100 001a 0344     		add	r3, r3, r0
 101 001c C017     		asrs	r0, r0, #31
 102 001e C0EBE330 		rsb	r0, r0, r3, asr #15
 103              	.LVL8:
  25:Core/Src/devs/wheel.cpp ****         __HAL_TIM_SET_COMPARE(htim, Channel, mapped_value);
 104              		.loc 1 25 0
 105 0022 3368     		ldr	r3, [r6]
 106 0024 3433     		adds	r3, r3, #52
 107 0026 AD08     		lsrs	r5, r5, #2
 108              	.LVL9:
 109 0028 80B2     		uxth	r0, r0
 110 002a 43F82500 		str	r0, [r3, r5, lsl #2]
 111              	.LVL10:
  26:Core/Src/devs/wheel.cpp **** }
 112              		.loc 1 26 0
 113 002e 70BD     		pop	{r4, r5, r6, pc}
 114              	.LVL11:
 115              	.L10:
 116              		.align	2
 117              	.L9:
 118 0030 01800080 		.word	-2147450879
 119              		.cfi_endproc
 120              	.LFE360:
 122              		.section	.text._ZL13set_DutyCycleP12Wheel_Configt,"ax",%progbits
 123              		.align	1
 124              		.syntax unified
 125              		.thumb
 126              		.thumb_func
 127              		.fpu fpv4-sp-d16
 129              	_ZL13set_DutyCycleP12Wheel_Configt:
 130              	.LFB361:
  27:Core/Src/devs/wheel.cpp **** 
  28:Core/Src/devs/wheel.cpp **** static void set_DutyCycle(Wheel_Config *w, uint16_t dutyCycle)
  29:Core/Src/devs/wheel.cpp **** {
 131              		.loc 1 29 0
 132              		.cfi_startproc
 133              		@ args = 0, pretend = 0, frame = 0
 134              		@ frame_needed = 0, uses_anonymous_args = 0
 135              	.LVL12:
 136 0000 08B5     		push	{r3, lr}
 137              	.LCFI2:
 138              		.cfi_def_cfa_offset 8
 139              		.cfi_offset 3, -8
 140              		.cfi_offset 14, -4
  30:Core/Src/devs/wheel.cpp ****         set_DutyCycle_Primary(w->htim, w->channel, dutyCycle);
 141              		.loc 1 30 0
 142 0002 0A46     		mov	r2, r1
 143 0004 C169     		ldr	r1, [r0, #28]
 144              	.LVL13:
 145 0006 8069     		ldr	r0, [r0, #24]
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 4


 146              	.LVL14:
 147 0008 FFF7FEFF 		bl	_ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt
 148              	.LVL15:
  31:Core/Src/devs/wheel.cpp **** }
 149              		.loc 1 31 0
 150 000c 08BD     		pop	{r3, pc}
 151              		.cfi_endproc
 152              	.LFE361:
 154              		.global	__aeabi_f2d
 155              		.global	__aeabi_ddiv
 156              		.global	__aeabi_dmul
 157              		.global	__aeabi_d2uiz
 158              		.section	.text._ZL14set_WheelOmegaP12Wheel_Configf,"ax",%progbits
 159              		.align	1
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 163              		.fpu fpv4-sp-d16
 165              	_ZL14set_WheelOmegaP12Wheel_Configf:
 166              	.LFB363:
  32:Core/Src/devs/wheel.cpp **** 
  33:Core/Src/devs/wheel.cpp **** static void set_WheelDirection(Wheel_Config *w, Direction d)
  34:Core/Src/devs/wheel.cpp **** {
  35:Core/Src/devs/wheel.cpp ****         if (d == Direction::AHEAD)       // AHEAD
  36:Core/Src/devs/wheel.cpp ****         {
  37:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_SET);
  38:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
  39:Core/Src/devs/wheel.cpp ****         }
  40:Core/Src/devs/wheel.cpp ****         else if (d == Direction::BACK)  // BACK
  41:Core/Src/devs/wheel.cpp ****         {
  42:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_RESET);
  43:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
  44:Core/Src/devs/wheel.cpp ****         }
  45:Core/Src/devs/wheel.cpp ****         else                    // HALT
  46:Core/Src/devs/wheel.cpp ****         {
  47:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in1_port, w->in1_pin, GPIO_PIN_RESET);
  48:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
  49:Core/Src/devs/wheel.cpp ****         }
  50:Core/Src/devs/wheel.cpp **** }
  51:Core/Src/devs/wheel.cpp **** 
  52:Core/Src/devs/wheel.cpp **** static void set_WheelOmega(Wheel_Config *w, float omega)
  53:Core/Src/devs/wheel.cpp **** {
 167              		.loc 1 53 0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              	.LVL16:
 172 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 173              	.LCFI3:
 174              		.cfi_def_cfa_offset 24
 175              		.cfi_offset 3, -24
 176              		.cfi_offset 4, -20
 177              		.cfi_offset 5, -16
 178              		.cfi_offset 6, -12
 179              		.cfi_offset 7, -8
 180              		.cfi_offset 14, -4
 181 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 5


 182 0004 10EE105A 		vmov	r5, s0
  54:Core/Src/devs/wheel.cpp ****         uint16_t new_omega = (65535.0 / max_omega1[w->id]) * (omega);
 183              		.loc 1 54 0
 184 0008 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 185 000a 114B     		ldr	r3, .L15+8
 186 000c 03EB8203 		add	r3, r3, r2, lsl #2
 187 0010 1868     		ldr	r0, [r3]	@ float
 188              	.LVL17:
 189 0012 FFF7FEFF 		bl	__aeabi_f2d
 190              	.LVL18:
 191 0016 0246     		mov	r2, r0
 192 0018 0B46     		mov	r3, r1
 193 001a 0BA1     		adr	r1, .L15
 194 001c D1E90001 		ldrd	r0, [r1]
 195 0020 FFF7FEFF 		bl	__aeabi_ddiv
 196              	.LVL19:
 197 0024 0646     		mov	r6, r0
 198 0026 0F46     		mov	r7, r1
 199 0028 2846     		mov	r0, r5	@ float
 200 002a FFF7FEFF 		bl	__aeabi_f2d
 201              	.LVL20:
 202 002e 0246     		mov	r2, r0
 203 0030 0B46     		mov	r3, r1
 204 0032 3046     		mov	r0, r6
 205 0034 3946     		mov	r1, r7
 206 0036 FFF7FEFF 		bl	__aeabi_dmul
 207              	.LVL21:
 208 003a FFF7FEFF 		bl	__aeabi_d2uiz
 209              	.LVL22:
  55:Core/Src/devs/wheel.cpp ****         set_DutyCycle(w, new_omega);
 210              		.loc 1 55 0
 211 003e 81B2     		uxth	r1, r0
 212 0040 2046     		mov	r0, r4
 213              	.LVL23:
 214 0042 FFF7FEFF 		bl	_ZL13set_DutyCycleP12Wheel_Configt
 215              	.LVL24:
  56:Core/Src/devs/wheel.cpp **** }
 216              		.loc 1 56 0
 217 0046 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 218              	.LVL25:
 219              	.L16:
 220              		.align	3
 221              	.L15:
 222 0048 00000000 		.word	0
 223 004c E0FFEF40 		.word	1089470432
 224 0050 00000000 		.word	.LANCHOR0
 225              		.cfi_endproc
 226              	.LFE363:
 228              		.section	.text._ZL18set_WheelDirectionP12Wheel_Config9Direction,"ax",%progbits
 229              		.align	1
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 233              		.fpu fpv4-sp-d16
 235              	_ZL18set_WheelDirectionP12Wheel_Config9Direction:
 236              	.LFB362:
  34:Core/Src/devs/wheel.cpp ****         if (d == Direction::AHEAD)       // AHEAD
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 6


 237              		.loc 1 34 0
 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 0
 240              		@ frame_needed = 0, uses_anonymous_args = 0
 241              	.LVL26:
 242 0000 10B5     		push	{r4, lr}
 243              	.LCFI4:
 244              		.cfi_def_cfa_offset 8
 245              		.cfi_offset 4, -8
 246              		.cfi_offset 14, -4
 247 0002 0446     		mov	r4, r0
  35:Core/Src/devs/wheel.cpp ****         {
 248              		.loc 1 35 0
 249 0004 61B1     		cbz	r1, .L22
  40:Core/Src/devs/wheel.cpp ****         {
 250              		.loc 1 40 0
 251 0006 0129     		cmp	r1, #1
 252 0008 15D0     		beq	.L23
  47:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 253              		.loc 1 47 0
 254 000a 0022     		movs	r2, #0
 255 000c 8189     		ldrh	r1, [r0, #12]
 256              	.LVL27:
 257 000e 8068     		ldr	r0, [r0, #8]
 258              	.LVL28:
 259 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
 260              	.LVL29:
  48:Core/Src/devs/wheel.cpp ****         }
 261              		.loc 1 48 0
 262 0014 0022     		movs	r2, #0
 263 0016 A18A     		ldrh	r1, [r4, #20]
 264 0018 2069     		ldr	r0, [r4, #16]
 265 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 266              	.LVL30:
 267              	.L17:
  50:Core/Src/devs/wheel.cpp **** 
 268              		.loc 1 50 0
 269 001e 10BD     		pop	{r4, pc}
 270              	.LVL31:
 271              	.L22:
  37:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_RESET);
 272              		.loc 1 37 0
 273 0020 0122     		movs	r2, #1
 274 0022 8189     		ldrh	r1, [r0, #12]
 275              	.LVL32:
 276 0024 8068     		ldr	r0, [r0, #8]
 277              	.LVL33:
 278 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 279              	.LVL34:
  38:Core/Src/devs/wheel.cpp ****         }
 280              		.loc 1 38 0
 281 002a 0022     		movs	r2, #0
 282 002c A18A     		ldrh	r1, [r4, #20]
 283 002e 2069     		ldr	r0, [r4, #16]
 284 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 285              	.LVL35:
 286 0034 F3E7     		b	.L17
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 7


 287              	.LVL36:
 288              	.L23:
  42:Core/Src/devs/wheel.cpp ****                 HAL_GPIO_WritePin(w->in2_port, w->in2_pin, GPIO_PIN_SET);
 289              		.loc 1 42 0
 290 0036 0022     		movs	r2, #0
 291 0038 8189     		ldrh	r1, [r0, #12]
 292              	.LVL37:
 293 003a 8068     		ldr	r0, [r0, #8]
 294              	.LVL38:
 295 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 296              	.LVL39:
  43:Core/Src/devs/wheel.cpp ****         }
 297              		.loc 1 43 0
 298 0040 0122     		movs	r2, #1
 299 0042 A18A     		ldrh	r1, [r4, #20]
 300 0044 2069     		ldr	r0, [r4, #16]
 301 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 302              	.LVL40:
 303 004a E8E7     		b	.L17
 304              		.cfi_endproc
 305              	.LFE362:
 307              		.section	.text._ZN5Wheel9set_OmegaEf,"ax",%progbits
 308              		.align	1
 309              		.global	_ZN5Wheel9set_OmegaEf
 310              		.syntax unified
 311              		.thumb
 312              		.thumb_func
 313              		.fpu fpv4-sp-d16
 315              	_ZN5Wheel9set_OmegaEf:
 316              	.LFB364:
  57:Core/Src/devs/wheel.cpp **** 
  58:Core/Src/devs/wheel.cpp **** void Wheel::set_Omega(float omega)
  59:Core/Src/devs/wheel.cpp **** {
 317              		.loc 1 59 0
 318              		.cfi_startproc
 319              		@ args = 0, pretend = 0, frame = 0
 320              		@ frame_needed = 0, uses_anonymous_args = 0
 321              		@ link register save eliminated.
 322              	.LVL41:
  60:Core/Src/devs/wheel.cpp ****         if (omega < -wheel_->tolerance) {
 323              		.loc 1 60 0
 324 0000 0368     		ldr	r3, [r0]
 325 0002 D3ED097A 		vldr.32	s15, [r3, #36]
 326 0006 B1EE677A 		vneg.f32	s14, s15
 327 000a B4EEC07A 		vcmpe.f32	s14, s0
 328 000e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 329 0012 07DC     		bgt	.L34
  61:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::BACK;
  62:Core/Src/devs/wheel.cpp ****         }
  63:Core/Src/devs/wheel.cpp ****         else if (omega > wheel_->tolerance) {
 330              		.loc 1 63 0
 331 0014 F4EEC07A 		vcmpe.f32	s15, s0
 332 0018 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 333 001c 09D4     		bmi	.L35
  64:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::AHEAD;
  65:Core/Src/devs/wheel.cpp ****         }
  66:Core/Src/devs/wheel.cpp ****         else {
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 8


  67:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::HALT;
 334              		.loc 1 67 0
 335 001e 0223     		movs	r3, #2
 336 0020 0371     		strb	r3, [r0, #4]
 337 0022 01E0     		b	.L27
 338              	.L34:
  61:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::BACK;
 339              		.loc 1 61 0
 340 0024 0123     		movs	r3, #1
 341 0026 0371     		strb	r3, [r0, #4]
 342              	.L27:
  68:Core/Src/devs/wheel.cpp ****                 omega_ = 0;
  69:Core/Src/devs/wheel.cpp ****         }
  70:Core/Src/devs/wheel.cpp ****         omega_ = fabsf(omega);
 343              		.loc 1 70 0
 344 0028 B0EEC00A 		vabs.f32	s0, s0
 345              	.LVL42:
 346 002c 80ED020A 		vstr.32	s0, [r0, #8]
  71:Core/Src/devs/wheel.cpp **** }
 347              		.loc 1 71 0
 348 0030 7047     		bx	lr
 349              	.LVL43:
 350              	.L35:
  64:Core/Src/devs/wheel.cpp ****                 dir_ = Direction::AHEAD;
 351              		.loc 1 64 0
 352 0032 0023     		movs	r3, #0
 353 0034 0371     		strb	r3, [r0, #4]
 354 0036 F7E7     		b	.L27
 355              		.cfi_endproc
 356              	.LFE364:
 358              		.section	.text._ZNK5Wheel6updateEv,"ax",%progbits
 359              		.align	1
 360              		.global	_ZNK5Wheel6updateEv
 361              		.syntax unified
 362              		.thumb
 363              		.thumb_func
 364              		.fpu fpv4-sp-d16
 366              	_ZNK5Wheel6updateEv:
 367              	.LFB365:
  72:Core/Src/devs/wheel.cpp **** 
  73:Core/Src/devs/wheel.cpp **** void Wheel::update() const
  74:Core/Src/devs/wheel.cpp **** {
 368              		.loc 1 74 0
 369              		.cfi_startproc
 370              		@ args = 0, pretend = 0, frame = 0
 371              		@ frame_needed = 0, uses_anonymous_args = 0
 372              	.LVL44:
 373 0000 10B5     		push	{r4, lr}
 374              	.LCFI5:
 375              		.cfi_def_cfa_offset 8
 376              		.cfi_offset 4, -8
 377              		.cfi_offset 14, -4
 378 0002 0446     		mov	r4, r0
  75:Core/Src/devs/wheel.cpp ****         if (omega_ < 0) {
 379              		.loc 1 75 0
 380 0004 D0ED027A 		vldr.32	s15, [r0, #8]
 381 0008 F5EEC07A 		vcmpe.f32	s15, #0
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 9


 382 000c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 383 0010 09D4     		bmi	.L41
 384              	.LVL45:
 385              	.L37:
  76:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
  77:Core/Src/devs/wheel.cpp ****         }
  78:Core/Src/devs/wheel.cpp ****         set_WheelDirection(wheel_, dir_);
 386              		.loc 1 78 0
 387 0012 2179     		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 388 0014 2068     		ldr	r0, [r4]
 389 0016 FFF7FEFF 		bl	_ZL18set_WheelDirectionP12Wheel_Config9Direction
 390              	.LVL46:
  79:Core/Src/devs/wheel.cpp ****         set_WheelOmega(wheel_, omega_);
 391              		.loc 1 79 0
 392 001a 94ED020A 		vldr.32	s0, [r4, #8]
 393 001e 2068     		ldr	r0, [r4]
 394 0020 FFF7FEFF 		bl	_ZL14set_WheelOmegaP12Wheel_Configf
 395              	.LVL47:
  80:Core/Src/devs/wheel.cpp **** }
 396              		.loc 1 80 0
 397 0024 10BD     		pop	{r4, pc}
 398              	.LVL48:
 399              	.L41:
  76:Core/Src/devs/wheel.cpp ****                 _Error_Handler(__FILE__, __LINE__);
 400              		.loc 1 76 0
 401 0026 4C21     		movs	r1, #76
 402 0028 0148     		ldr	r0, .L42
 403              	.LVL49:
 404 002a FFF7FEFF 		bl	_Error_Handler
 405              	.LVL50:
 406 002e F0E7     		b	.L37
 407              	.L43:
 408              		.align	2
 409              	.L42:
 410 0030 00000000 		.word	.LC0
 411              		.cfi_endproc
 412              	.LFE365:
 414              		.global	__aeabi_i2d
 415              		.global	__aeabi_d2f
 416              		.section	.text._ZN5Wheel9get_OmegaEm,"ax",%progbits
 417              		.align	1
 418              		.global	_ZN5Wheel9get_OmegaEm
 419              		.syntax unified
 420              		.thumb
 421              		.thumb_func
 422              		.fpu fpv4-sp-d16
 424              	_ZN5Wheel9get_OmegaEm:
 425              	.LFB366:
  81:Core/Src/devs/wheel.cpp **** 
  82:Core/Src/devs/wheel.cpp **** float Wheel::get_Omega(uint32_t dt_millis)
  83:Core/Src/devs/wheel.cpp **** {
 426              		.loc 1 83 0
 427              		.cfi_startproc
 428              		@ args = 0, pretend = 0, frame = 0
 429              		@ frame_needed = 0, uses_anonymous_args = 0
 430              	.LVL51:
 431 0000 38B5     		push	{r3, r4, r5, lr}
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 10


 432              	.LCFI6:
 433              		.cfi_def_cfa_offset 16
 434              		.cfi_offset 3, -16
 435              		.cfi_offset 4, -12
 436              		.cfi_offset 5, -8
 437              		.cfi_offset 14, -4
 438 0002 2DED028B 		vpush.64	{d8}
 439              	.LCFI7:
 440              		.cfi_def_cfa_offset 24
 441              		.cfi_offset 80, -24
 442              		.cfi_offset 81, -20
 443 0006 08EE101A 		vmov	s16, r1	@ int
  84:Core/Src/devs/wheel.cpp ****         int16_t cps = wheel_->henc->Instance->CNT;
 444              		.loc 1 84 0
 445 000a 0368     		ldr	r3, [r0]
 446 000c 1B6A     		ldr	r3, [r3, #32]
 447 000e 1B68     		ldr	r3, [r3]
 448 0010 586A     		ldr	r0, [r3, #36]
 449              	.LVL52:
  85:Core/Src/devs/wheel.cpp ****         wheel_->henc->Instance->CNT = 0;
 450              		.loc 1 85 0
 451 0012 0022     		movs	r2, #0
 452 0014 5A62     		str	r2, [r3, #36]
  86:Core/Src/devs/wheel.cpp ****         float omega = 2*3.14159*1000.0 * cps / (715.0*(float)dt_millis);
 453              		.loc 1 86 0
 454 0016 00B2     		sxth	r0, r0
 455 0018 FFF7FEFF 		bl	__aeabi_i2d
 456              	.LVL53:
 457 001c 0FA3     		adr	r3, .L46+4
 458 001e D3E90023 		ldrd	r2, [r3]
 459 0022 FFF7FEFF 		bl	__aeabi_dmul
 460              	.LVL54:
 461 0026 0446     		mov	r4, r0
 462 0028 0D46     		mov	r5, r1
 463 002a F8EE487A 		vcvt.f32.u32	s15, s16
 464 002e 17EE900A 		vmov	r0, s15
 465 0032 FFF7FEFF 		bl	__aeabi_f2d
 466              	.LVL55:
 467 0036 0022     		movs	r2, #0
 468 0038 074B     		ldr	r3, .L46
 469 003a FFF7FEFF 		bl	__aeabi_dmul
 470              	.LVL56:
 471 003e 0246     		mov	r2, r0
 472 0040 0B46     		mov	r3, r1
 473 0042 2046     		mov	r0, r4
 474 0044 2946     		mov	r1, r5
 475 0046 FFF7FEFF 		bl	__aeabi_ddiv
 476              	.LVL57:
 477 004a FFF7FEFF 		bl	__aeabi_d2f
 478              	.LVL58:
  87:Core/Src/devs/wheel.cpp **** 
  88:Core/Src/devs/wheel.cpp ****         return omega;
  89:Core/Src/devs/wheel.cpp **** }...
 479              		.loc 1 89 0
 480 004e 00EE100A 		vmov	s0, r0
 481 0052 BDEC028B 		vldm	sp!, {d8}
 482              	.LCFI8:
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 11


 483              		.cfi_restore 80
 484              		.cfi_restore 81
 485              		.cfi_def_cfa_offset 16
 486              	.LVL59:
 487 0056 38BD     		pop	{r3, r4, r5, pc}
 488              	.L47:
 489              		.align	3
 490              	.L46:
 491 0058 00588640 		.word	1082546176
 492 005c 47E17A14 		.word	343597383
 493 0060 2E8BB840 		.word	1085836078
 494              		.cfi_endproc
 495              	.LFE366:
 497              		.section	.rodata._ZL10max_omega1,"a",%progbits
 498              		.align	2
 499              		.set	.LANCHOR0,. + 0
 502              	_ZL10max_omega1:
 503 0000 00000841 		.word	1091043328
 504 0004 0000E040 		.word	1088421888
 505              		.section	.rodata._ZL11time_periodt.str1.4,"aMS",%progbits,1
 506              		.align	2
 507              	.LC0:
 508 0000 436F7265 		.ascii	"Core/Src/devs/wheel.cpp\000"
 508      2F537263 
 508      2F646576 
 508      732F7768 
 508      65656C2E 
 509              		.text
 510              	.Letext0:
 511              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 512              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 513              		.file 4 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/CMSIS/Include/core
 514              		.file 5 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/CMSIS/Device/ST/ST
 515              		.file 6 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/CMSIS/Device/ST/ST
 516              		.file 7 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/CMSIS/Device/ST/ST
 517              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 518              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 519              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eab
 520              		.file 11 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 521              		.file 12 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/STM32F4xx_HAL_Dri
 522              		.file 13 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/STM32F4xx_HAL_Dri
 523              		.file 14 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/STM32F4xx_HAL_Dri
 524              		.file 15 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/STM32F4xx_HAL_Dri
 525              		.file 16 "C:/Users/Prashant/STM32Cube/Repository/STM32Cube_FW_F4_V1.21.0/Drivers/STM32F4xx_HAL_Dri
 526              		.file 17 "Core/Inc\\periphs/tim.h"
 527              		.file 18 "Core/Inc\\devs/wheel.h"
 528              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 529              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 530              		.file 21 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 531              		.file 22 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 532              		.file 23 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 533              		.file 24 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 534              		.file 25 "<built-in>"
ARM GAS  C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 wheel.cpp
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:18     .text._ZL11time_periodt:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:24     .text._ZL11time_periodt:00000000 _ZL11time_periodt
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:63     .text._ZL11time_periodt:00000024 $d
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:69     .text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:75     .text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:00000000 _ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:118    .text._ZL21set_DutyCycle_PrimaryP17TIM_HandleTypeDefmt:00000030 $d
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:123    .text._ZL13set_DutyCycleP12Wheel_Configt:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:129    .text._ZL13set_DutyCycleP12Wheel_Configt:00000000 _ZL13set_DutyCycleP12Wheel_Configt
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:159    .text._ZL14set_WheelOmegaP12Wheel_Configf:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:165    .text._ZL14set_WheelOmegaP12Wheel_Configf:00000000 _ZL14set_WheelOmegaP12Wheel_Configf
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:222    .text._ZL14set_WheelOmegaP12Wheel_Configf:00000048 $d
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:229    .text._ZL18set_WheelDirectionP12Wheel_Config9Direction:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:235    .text._ZL18set_WheelDirectionP12Wheel_Config9Direction:00000000 _ZL18set_WheelDirectionP12Wheel_Config9Direction
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:308    .text._ZN5Wheel9set_OmegaEf:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:315    .text._ZN5Wheel9set_OmegaEf:00000000 _ZN5Wheel9set_OmegaEf
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:359    .text._ZNK5Wheel6updateEv:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:366    .text._ZNK5Wheel6updateEv:00000000 _ZNK5Wheel6updateEv
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:410    .text._ZNK5Wheel6updateEv:00000030 $d
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:417    .text._ZN5Wheel9get_OmegaEm:00000000 $t
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:424    .text._ZN5Wheel9get_OmegaEm:00000000 _ZN5Wheel9get_OmegaEm
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:491    .text._ZN5Wheel9get_OmegaEm:00000058 $d
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:498    .rodata._ZL10max_omega1:00000000 $d
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:502    .rodata._ZL10max_omega1:00000000 _ZL10max_omega1
C:\Users\Prashant\AppData\Local\Temp\cc32tsXI.s:506    .rodata._ZL11time_periodt.str1.4:00000000 $d

UNDEFINED SYMBOLS
_Error_Handler
__aeabi_f2d
__aeabi_ddiv
__aeabi_dmul
__aeabi_d2uiz
HAL_GPIO_WritePin
__aeabi_i2d
__aeabi_d2f
