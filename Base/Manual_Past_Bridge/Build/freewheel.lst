ARM GAS  C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"freewheel.cpp"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._Z15Enc_HandleCountP3Enc,"ax",%progbits
  18              		.align	1
  19              		.global	_Z15Enc_HandleCountP3Enc
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	_Z15Enc_HandleCountP3Enc:
  26              	.LFB124:
  27              		.file 1 "Core/Src/devs/freewheel.cpp"
   1:Core/Src/devs/freewheel.cpp **** /*
   2:Core/Src/devs/freewheel.cpp ****  * freewheel.c
   3:Core/Src/devs/freewheel.cpp ****  * 
   4:Core/Src/devs/freewheel.cpp ****  * Created : 1/4/2018
   5:Core/Src/devs/freewheel.cpp ****  *  Author : n-is
   6:Core/Src/devs/freewheel.cpp ****  *   email : 073bex422.nischal@pcampus.edu.np
   7:Core/Src/devs/freewheel.cpp ****  */
   8:Core/Src/devs/freewheel.cpp **** 
   9:Core/Src/devs/freewheel.cpp **** #include "freewheel.h"
  10:Core/Src/devs/freewheel.cpp **** 
  11:Core/Src/devs/freewheel.cpp **** #define PI                              (3.14159)
  12:Core/Src/devs/freewheel.cpp **** #define DISTANCE_RATIO(PPR, RADIUS)     (2.0*(PI)*(RADIUS)/((PPR)))
  13:Core/Src/devs/freewheel.cpp **** 
  14:Core/Src/devs/freewheel.cpp **** void Enc_HandleCount(struct Enc *enc)
  15:Core/Src/devs/freewheel.cpp **** {
  28              		.loc 1 15 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 0446     		mov	r4, r0
  16:Core/Src/devs/freewheel.cpp ****         if (HAL_GPIO_ReadPin(enc->chB_port, enc->chB_pin) != GPIO_PIN_RESET) {
  39              		.loc 1 16 0
  40 0004 8188     		ldrh	r1, [r0, #4]
  41 0006 0068     		ldr	r0, [r0]
  42              	.LVL1:
ARM GAS  C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s 			page 2


  43 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  44              	.LVL2:
  45 000c 18B9     		cbnz	r0, .L5
  17:Core/Src/devs/freewheel.cpp ****                 ++enc->count;
  18:Core/Src/devs/freewheel.cpp ****         } else {
  19:Core/Src/devs/freewheel.cpp ****                 --enc->count;
  46              		.loc 1 19 0
  47 000e A368     		ldr	r3, [r4, #8]
  48 0010 013B     		subs	r3, r3, #1
  49 0012 A360     		str	r3, [r4, #8]
  50              	.L1:
  20:Core/Src/devs/freewheel.cpp ****         }
  21:Core/Src/devs/freewheel.cpp **** }
  51              		.loc 1 21 0
  52 0014 10BD     		pop	{r4, pc}
  53              	.LVL3:
  54              	.L5:
  17:Core/Src/devs/freewheel.cpp ****                 ++enc->count;
  55              		.loc 1 17 0
  56 0016 A368     		ldr	r3, [r4, #8]
  57 0018 0133     		adds	r3, r3, #1
  58 001a A360     		str	r3, [r4, #8]
  59 001c FAE7     		b	.L1
  60              		.cfi_endproc
  61              	.LFE124:
  63              		.global	__aeabi_f2d
  64              		.global	__aeabi_dmul
  65              		.global	__aeabi_ddiv
  66              		.global	__aeabi_d2f
  67              		.section	.text._Z17Enc_get_DeltaDistP3Enc,"ax",%progbits
  68              		.align	1
  69              		.global	_Z17Enc_get_DeltaDistP3Enc
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  73              		.fpu fpv4-sp-d16
  75              	_Z17Enc_get_DeltaDistP3Enc:
  76              	.LFB125:
  22:Core/Src/devs/freewheel.cpp **** 
  23:Core/Src/devs/freewheel.cpp **** int32_t gYCount = 0;
  24:Core/Src/devs/freewheel.cpp **** int32_t gXCount = 0;
  25:Core/Src/devs/freewheel.cpp **** 
  26:Core/Src/devs/freewheel.cpp **** float Enc_get_DeltaDist(struct Enc *enc)
  27:Core/Src/devs/freewheel.cpp **** {
  77              		.loc 1 27 0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              	.LVL4:
  82 0000 2DE9D043 		push	{r4, r6, r7, r8, r9, lr}
  83              	.LCFI1:
  84              		.cfi_def_cfa_offset 24
  85              		.cfi_offset 4, -24
  86              		.cfi_offset 6, -20
  87              		.cfi_offset 7, -16
  88              		.cfi_offset 8, -12
  89              		.cfi_offset 9, -8
ARM GAS  C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s 			page 3


  90              		.cfi_offset 14, -4
  91 0004 0446     		mov	r4, r0
  28:Core/Src/devs/freewheel.cpp ****         int32_t last_count = enc->count;
  92              		.loc 1 28 0
  93 0006 8068     		ldr	r0, [r0, #8]
  94              	.LVL5:
  29:Core/Src/devs/freewheel.cpp ****         enc->count = 0;
  95              		.loc 1 29 0
  96 0008 0023     		movs	r3, #0
  97 000a A360     		str	r3, [r4, #8]
  30:Core/Src/devs/freewheel.cpp ****         
  31:Core/Src/devs/freewheel.cpp ****         // if (enc->id == 'y') {
  32:Core/Src/devs/freewheel.cpp ****         //         gYCount += last_count;
  33:Core/Src/devs/freewheel.cpp ****         //         printf("%c : %ld\n", enc->id, gYCount);
  34:Core/Src/devs/freewheel.cpp ****         // }
  35:Core/Src/devs/freewheel.cpp ****         
  36:Core/Src/devs/freewheel.cpp ****         // if (enc->id == 'x') {
  37:Core/Src/devs/freewheel.cpp ****         //         gXCount += last_count;
  38:Core/Src/devs/freewheel.cpp ****         //         printf("%c : %ld\n", enc->id, gXCount);
  39:Core/Src/devs/freewheel.cpp ****         // }
  40:Core/Src/devs/freewheel.cpp **** 
  41:Core/Src/devs/freewheel.cpp ****         return ((float)last_count * DISTANCE_RATIO(enc->ppr, enc->radius));
  98              		.loc 1 41 0
  99 000c 07EE900A 		vmov	s15, r0	@ int
 100 0010 F8EEE77A 		vcvt.f32.s32	s15, s15
 101 0014 17EE900A 		vmov	r0, s15
 102              	.LVL6:
 103 0018 FFF7FEFF 		bl	__aeabi_f2d
 104              	.LVL7:
 105 001c 0646     		mov	r6, r0
 106 001e 0F46     		mov	r7, r1
 107 0020 E068     		ldr	r0, [r4, #12]	@ float
 108 0022 FFF7FEFF 		bl	__aeabi_f2d
 109              	.LVL8:
 110 0026 0EA3     		adr	r3, .L8
 111 0028 D3E90023 		ldrd	r2, [r3]
 112 002c FFF7FEFF 		bl	__aeabi_dmul
 113              	.LVL9:
 114 0030 8046     		mov	r8, r0
 115 0032 8946     		mov	r9, r1
 116 0034 2069     		ldr	r0, [r4, #16]	@ float
 117 0036 FFF7FEFF 		bl	__aeabi_f2d
 118              	.LVL10:
 119 003a 0246     		mov	r2, r0
 120 003c 0B46     		mov	r3, r1
 121 003e 4046     		mov	r0, r8
 122 0040 4946     		mov	r1, r9
 123 0042 FFF7FEFF 		bl	__aeabi_ddiv
 124              	.LVL11:
 125 0046 0246     		mov	r2, r0
 126 0048 0B46     		mov	r3, r1
 127 004a 3046     		mov	r0, r6
 128 004c 3946     		mov	r1, r7
 129 004e FFF7FEFF 		bl	__aeabi_dmul
 130              	.LVL12:
 131 0052 FFF7FEFF 		bl	__aeabi_d2f
 132              	.LVL13:
ARM GAS  C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s 			page 4


  42:Core/Src/devs/freewheel.cpp **** }
 133              		.loc 1 42 0
 134 0056 00EE100A 		vmov	s0, r0
 135 005a BDE8D083 		pop	{r4, r6, r7, r8, r9, pc}
 136              	.LVL14:
 137              	.L9:
 138 005e 00BF     		.align	3
 139              	.L8:
 140 0060 6E861BF0 		.word	-266631570
 141 0064 F9211940 		.word	1075388921
 142              		.cfi_endproc
 143              	.LFE125:
 145              		.global	gXCount
 146              		.global	gYCount
 147              		.section	.bss.gXCount,"aw",%nobits
 148              		.align	2
 151              	gXCount:
 152 0000 00000000 		.space	4
 153              		.section	.bss.gYCount,"aw",%nobits
 154              		.align	2
 157              	gYCount:
 158 0000 00000000 		.space	4
 159              		.text
 160              	.Letext0:
 161              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 162              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 163              		.file 4 "C:/Users/n-is/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Include/core_cm4
 164              		.file 5 "C:/Users/n-is/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Device/ST/STM32F
 165              		.file 6 "C:/Users/n-is/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Device/ST/STM32F
 166              		.file 7 "C:/Users/n-is/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/CMSIS/Device/ST/STM32F
 167              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 168              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 169              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eab
 170              		.file 11 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 171              		.file 12 "C:/Users/n-is/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/STM32F4xx_HAL_Driver/
 172              		.file 13 "C:/Users/n-is/STM32Cube/Repository/STM32Cube_FW_F4_V1.23.0/Drivers/STM32F4xx_HAL_Driver/
 173              		.file 14 "Core/Inc/devs/freewheel.h"
ARM GAS  C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 freewheel.cpp
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:18     .text._Z15Enc_HandleCountP3Enc:00000000 $t
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:25     .text._Z15Enc_HandleCountP3Enc:00000000 _Z15Enc_HandleCountP3Enc
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:68     .text._Z17Enc_get_DeltaDistP3Enc:00000000 $t
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:75     .text._Z17Enc_get_DeltaDistP3Enc:00000000 _Z17Enc_get_DeltaDistP3Enc
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:140    .text._Z17Enc_get_DeltaDistP3Enc:00000060 $d
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:151    .bss.gXCount:00000000 gXCount
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:157    .bss.gYCount:00000000 gYCount
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:148    .bss.gXCount:00000000 $d
C:\Users\073be\AppData\Local\Temp\cc6sG7GJ.s:154    .bss.gYCount:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_ReadPin
__aeabi_f2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_d2f
